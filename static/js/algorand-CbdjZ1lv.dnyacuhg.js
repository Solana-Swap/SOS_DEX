const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-CglIP2bi.o53olfur.js","./Bridge.lgxq8siz.js","./index.nfgr41gs.js","./vue.hg068oe2.js","./lodash-es.bp0zmem9.js","./axios.i01mok01.js","./dayjs.pb8a0t5b.js","../css/vue.e5cp8j36.css","./vuex.fbct4zil.js","./vue-router.gna9i9mz.js","./svg-icons.nw66rbkj.js","../css/index.jhoysihq.css","../css/Bridge.haapux6m.css","./index-BJ3-GV70.krcqxz2x.js"])))=>i.map(i=>d[i]);
import{_ as p}from"./index.nfgr41gs.js";import{h as I,n as C,ak as c,i as A,al as y,k as T,l as h,am as l,m as k,q as E,c as x,an as w,C as R,ao as j,ap as S}from"./Bridge.lgxq8siz.js";import"./vue.hg068oe2.js";import"./lodash-es.bp0zmem9.js";import"./axios.i01mok01.js";import"./dayjs.pb8a0t5b.js";import"./vuex.fbct4zil.js";import"./vue-router.gna9i9mz.js";import"./svg-icons.nw66rbkj.js";var D=Object.defineProperty,N=(i,t,o)=>t in i?D(i,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[t]=o,f=(i,t,o)=>N(i,typeof t!="symbol"?t+"":t,o);class v extends R{}const b=class u extends I{constructor(t,o){super(t,o??C(t,u._platform))}getRpc(t){if(t in this.config)return new c.Algodv2("",this.config[t].rpc);throw new Error("No configuration available for chain: "+t)}getChain(t){if(t in this.config)return new v(t,this);throw new Error("No configuration available for chain: "+t)}static nativeTokenId(t,o){if(!u.isSupportedChain(o))throw new Error(`invalid chain for Algorand: ${o}`);return A.chainAddress(o,y)}static isNativeTokenId(t,o,n){return!u.isSupportedChain(o)||n.chain!==o?!1:this.nativeTokenId(t,o)==n}static isSupportedChain(t){return T(t)===u._platform}static async getDecimals(t,o,n){const s=h(n)?0:new l(n).toInt();if(s===0)return k(u._platform);const e=await o.getAssetByID(s).do(),r=c.modelsv2.Asset.from_obj_for_encoding(e);if(!r.params||!r.params.decimals)throw new Error("Could not fetch token details");return Number(r.params.decimals)}static async getBalance(t,o,n,s){const e=h(s)?0:new l(s).toInt();if(e===0){const m=await o.accountInformation(n).do(),d=c.modelsv2.Account.from_obj_for_encoding(m);return BigInt(d.amount)}const r=await o.accountAssetInformation(n,e).do(),a=c.modelsv2.AssetHolding.from_obj_for_encoding(r);return BigInt(a.amount)}static async getBalances(t,o,n,s){let e;if(s.includes("native")){const r=await o.accountInformation(n).do(),a=c.modelsv2.Account.from_obj_for_encoding(r);e=BigInt(a.amount)}return s.map(async r=>{if(h(r))return{native:e};const a=new l(r).toInt(),m=await o.accountAssetInformation(n,a).do(),d=c.modelsv2.AssetHolding.from_obj_for_encoding(m);return BigInt(d.amount)}).reduce((r,a)=>Object.assign(r,a),{})}static async sendWait(t,o,n){const s=n.map((a,m)=>c.decodeSignedTransaction(a)).map((a,m)=>a.txn.txID()),{txId:e}=await o.sendRawTransaction(n).do();if(!e)throw new Error("Transaction(s) failed to send");const r=await c.waitForConfirmation(o,e,4);if(!c.modelsv2.PendingTransactionResponse.from_obj_for_encoding(r).confirmedRound)throw new Error("Transaction(s) could not be confirmed in 4 rounds");return s}static async getLatestBlock(t){const o=await t.status().do(),n=c.modelsv2.NodeStatusResponse.from_obj_for_encoding(o);if(!n.lastRound)throw new Error("Error getting status from node");return Number(n.lastRound)}static async getLatestFinalizedBlock(t){const o=await t.status().do(),n=c.modelsv2.NodeStatusResponse.from_obj_for_encoding(o);if(!n.lastRound)throw new Error("Error getting status from node");return Number(n.lastRound)}static chainFromChainId(t){const o=E(u._platform,t);if(o===void 0)throw new Error(`Unknown native chain id ${t}`);const[n,s]=o;return[n,s]}static async chainFromRpc(t){const o=await t.versionsCheck().do(),n=c.modelsv2.Version.from_obj_for_encoding(o);return this.chainFromChainId(n.genesisId)}};f(b,"_platform",w);let _=b;async function B(i,t){const[o,n]=await _.chainFromRpc(i);return new P(n,i,t)}class P{constructor(t,o,n,s=!1){f(this,"_chain"),f(this,"_debug"),f(this,"_account"),this._chain=t,this._debug=s,this._account=j(n)}chain(){return this._chain}address(){return this._account.addr}async sign(t){const o=[],n=t.map((r,a)=>r.transaction.tx),s=S(n),e=t.map((r,a)=>(r.transaction.tx=s[a],r));for(const r of e){const{description:a,transaction:m}=r,{tx:d,signer:g}=m;this._debug&&(console.log(d._getDictForDisplay()),console.log(d.txID())),g?(this._debug&&console.log(`Signing: ${a} with signer ${g.address} for address ${this.address()}`),o.push(await g.signTxn(d))):(this._debug&&console.log(`Signing: ${a} without signer for address ${this.address()}`),o.push(d.signTxn(this._account.sk)))}return o}}const $={Address:l,Platform:_,getSigner:B,protocols:{WormholeCore:()=>p(()=>import("./index-CglIP2bi.o53olfur.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url).then(i=>i.i),TokenBridge:()=>p(()=>import("./index-BJ3-GV70.krcqxz2x.js"),__vite__mapDeps([13,0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)},getChain:(i,t,o)=>new v(t,new _(i,x(i,w,{[t]:o})))},G=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"}));export{_ as A,G as a};
