const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-RH1OzbVe.jtzng3hc.js","./Bridge.l6xugmfj.js","./index.ehffodxd.js","./vue.fv0erkdm.js","./lodash-es.bp0zmem9.js","./axios.i01mok01.js","./dayjs.pb8a0t5b.js","../css/vue.e5cp8j36.css","./vuex.jdzbw26m.js","./vue-router.jwqkmej7.js","./svg-icons.nw66rbkj.js","../css/index.jhoysihq.css","../css/Bridge.haapux6m.css","./index-C61jUsbI.dzolq0mr.js"])))=>i.map(i=>d[i]);
import{_ as Qt}from"./index.ehffodxd.js";import{h as ai,n as ci,i as li,j as Yt,k as di,l as dt,m as ui,o as hi,p as hr,q as fi,c as gi,r as fr,s as Le,C as pi,t as _i,u as yi}from"./Bridge.l6xugmfj.js";import"./vue.fv0erkdm.js";import"./lodash-es.bp0zmem9.js";import"./axios.i01mok01.js";import"./dayjs.pb8a0t5b.js";import"./vuex.jdzbw26m.js";import"./vue-router.jwqkmej7.js";import"./svg-icons.nw66rbkj.js";var wi=Object.defineProperty,mi=(r,e,t)=>e in r?wi(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ye=(r,e,t)=>mi(r,typeof e!="symbol"?e+"":e,t);function Y(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function bi(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function At(r,...e){if(!bi(r))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(r.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${r.length}`)}function gr(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Y(r.outputLen),Y(r.blockLen)}function ae(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function pr(r,e){At(r);const t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vi=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4));function _r(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}const Pe=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),P=(r,e)=>r<<32-e|r>>>e,Ai=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Ai)throw new Error("Non little-endian hardware is not supported");const xi=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function yr(r){if(!_r(r))throw new Error("Uint8Array expected");let e="";for(let t=0;t<r.length;t++)e+=xi[r[t]];return e}const F={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function er(r){if(r>=F._0&&r<=F._9)return r-F._0;if(r>=F._A&&r<=F._F)return r-(F._A-10);if(r>=F._a&&r<=F._f)return r-(F._a-10)}function wr(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length,t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const s=new Uint8Array(t);for(let i=0,n=0;i<t;i++,n+=2){const o=er(r.charCodeAt(n)),a=er(r.charCodeAt(n+1));if(o===void 0||a===void 0){const c=r[n]+r[n+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+n)}s[i]=o*16+a}return s}function Ui(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function ce(r){if(typeof r=="string"&&(r=Ui(r)),!_r(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}class xt{clone(){return this._cloneInto()}}const zi={}.toString;function Ti(r,e){if(e!==void 0&&zi.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(r,e)}function Ut(r){const e=s=>r().update(ce(s)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}class mr extends xt{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,gr(e);const s=ce(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,n=new Uint8Array(i);n.set(s.length>i?e.create().update(s).digest():s);for(let o=0;o<n.length;o++)n[o]^=54;this.iHash.update(n),this.oHash=e.create();for(let o=0;o<n.length;o++)n[o]^=106;this.oHash.update(n),n.fill(0)}update(e){return ae(this),this.iHash.update(e),this}digestInto(e){ae(this),At(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:s,finished:i,destroyed:n,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=n,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=s._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const We=(r,e,t)=>new mr(r,e).update(t).digest();We.create=(r,e)=>new mr(r,e);function Si(r,e,t,s){gr(r);const i=Ti({dkLen:32,asyncTick:10},s),{c:n,dkLen:o,asyncTick:a}=i;if(Y(n),Y(o),Y(a),n<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=ce(e),l=ce(t),d=new Uint8Array(o),u=We.create(r,c),h=u._cloneInto().update(l);return{c:n,dkLen:o,asyncTick:a,DK:d,PRF:u,PRFSalt:h}}function Ei(r,e,t,s,i){return r.destroy(),e.destroy(),s&&s.destroy(),i.fill(0),t}function Bi(r,e,t,s){const{c:i,dkLen:n,DK:o,PRF:a,PRFSalt:c}=Si(r,e,t,s);let l;const d=new Uint8Array(4),u=Pe(d),h=new Uint8Array(a.outputLen);for(let p=1,y=0;y<n;p++,y+=a.outputLen){const f=o.subarray(y,y+a.outputLen);u.setInt32(0,p,!1),(l=c._cloneInto(l)).update(d).digestInto(h),f.set(h.subarray(0,f.length));for(let b=1;b<i;b++){a._cloneInto(l).update(h).digestInto(h);for(let E=0;E<f.length;E++)f[E]^=h[E]}}return Ei(a,c,o,l,h)}function ki(r,e,t,s){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,s);const i=BigInt(32),n=BigInt(4294967295),o=Number(t>>i&n),a=Number(t&n),c=s?4:0,l=s?0:4;r.setUint32(e+c,o,s),r.setUint32(e+l,a,s)}class br extends xt{constructor(e,t,s,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=s,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Pe(this.buffer)}update(e){ae(this);const{view:t,buffer:s,blockLen:i}=this;e=ce(e);const n=e.length;for(let o=0;o<n;){const a=Math.min(i-this.pos,n-o);if(a===i){const c=Pe(e);for(;i<=n-o;o+=i)this.process(c,o);continue}s.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ae(this),pr(e,this),this.finished=!0;const{buffer:t,view:s,blockLen:i,isLE:n}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(s,0),o=0);for(let u=o;u<i;u++)t[u]=0;ki(s,i-8,BigInt(this.length*8),n),this.process(s,0);const a=Pe(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)a.setUint32(4*u,d[u],n)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const s=e.slice(0,t);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:s,length:i,finished:n,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=n,e.destroyed=o,i%t&&e.buffer.set(s),e}}const Ii=(r,e,t)=>r&e^~r&t,$i=(r,e,t)=>r&e^r&t^e&t,Ci=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),K=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),j=new Uint32Array(64);class Oi extends br{constructor(){super(64,32,8,!1),this.A=K[0]|0,this.B=K[1]|0,this.C=K[2]|0,this.D=K[3]|0,this.E=K[4]|0,this.F=K[5]|0,this.G=K[6]|0,this.H=K[7]|0}get(){const{A:e,B:t,C:s,D:i,E:n,F:o,G:a,H:c}=this;return[e,t,s,i,n,o,a,c]}set(e,t,s,i,n,o,a,c){this.A=e|0,this.B=t|0,this.C=s|0,this.D=i|0,this.E=n|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,t){for(let u=0;u<16;u++,t+=4)j[u]=e.getUint32(t,!1);for(let u=16;u<64;u++){const h=j[u-15],p=j[u-2],y=P(h,7)^P(h,18)^h>>>3,f=P(p,17)^P(p,19)^p>>>10;j[u]=f+j[u-7]+y+j[u-16]|0}let{A:s,B:i,C:n,D:o,E:a,F:c,G:l,H:d}=this;for(let u=0;u<64;u++){const h=P(a,6)^P(a,11)^P(a,25),p=d+h+Ii(a,c,l)+Ci[u]+j[u]|0,y=(P(s,2)^P(s,13)^P(s,22))+$i(s,i,n)|0;d=l,l=c,c=a,a=o+p|0,o=n,n=i,i=s,s=p+y|0}s=s+this.A|0,i=i+this.B|0,n=n+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,d=d+this.H|0,this.set(s,i,n,o,a,c,l,d)}roundClean(){j.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Li=Ut(()=>new Oi),Ne=BigInt(2**32-1),ht=BigInt(32);function vr(r,e=!1){return e?{h:Number(r&Ne),l:Number(r>>ht&Ne)}:{h:Number(r>>ht&Ne)|0,l:Number(r&Ne)|0}}function Ar(r,e=!1){let t=new Uint32Array(r.length),s=new Uint32Array(r.length);for(let i=0;i<r.length;i++){const{h:n,l:o}=vr(r[i],e);[t[i],s[i]]=[n,o]}return[t,s]}const Ni=(r,e)=>BigInt(r>>>0)<<ht|BigInt(e>>>0),Hi=(r,e,t)=>r>>>t,Pi=(r,e,t)=>r<<32-t|e>>>t,qi=(r,e,t)=>r>>>t|e<<32-t,Di=(r,e,t)=>r<<32-t|e>>>t,Fi=(r,e,t)=>r<<64-t|e>>>t-32,Mi=(r,e,t)=>r>>>t-32|e<<64-t,Ri=(r,e)=>e,Gi=(r,e)=>r,xr=(r,e,t)=>r<<t|e>>>32-t,Ur=(r,e,t)=>e<<t|r>>>32-t,zr=(r,e,t)=>e<<t-32|r>>>64-t,Tr=(r,e,t)=>r<<t-32|e>>>64-t;function Ki(r,e,t,s){const i=(e>>>0)+(s>>>0);return{h:r+t+(i/2**32|0)|0,l:i|0}}const ji=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),Vi=(r,e,t,s)=>e+t+s+(r/2**32|0)|0,Wi=(r,e,t,s)=>(r>>>0)+(e>>>0)+(t>>>0)+(s>>>0),Xi=(r,e,t,s,i)=>e+t+s+i+(r/2**32|0)|0,Ji=(r,e,t,s,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(s>>>0)+(i>>>0),Zi=(r,e,t,s,i,n)=>e+t+s+i+n+(r/2**32|0)|0,_={fromBig:vr,split:Ar,toBig:Ni,shrSH:Hi,shrSL:Pi,rotrSH:qi,rotrSL:Di,rotrBH:Fi,rotrBL:Mi,rotr32H:Ri,rotr32L:Gi,rotlSH:xr,rotlSL:Ur,rotlBH:zr,rotlBL:Tr,add:Ki,add3L:ji,add3H:Vi,add4L:Wi,add4H:Xi,add5H:Zi,add5L:Ji},[Qi,Yi]=_.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),V=new Uint32Array(80),W=new Uint32Array(80);class en extends br{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:s,Bl:i,Ch:n,Cl:o,Dh:a,Dl:c,Eh:l,El:d,Fh:u,Fl:h,Gh:p,Gl:y,Hh:f,Hl:b}=this;return[e,t,s,i,n,o,a,c,l,d,u,h,p,y,f,b]}set(e,t,s,i,n,o,a,c,l,d,u,h,p,y,f,b){this.Ah=e|0,this.Al=t|0,this.Bh=s|0,this.Bl=i|0,this.Ch=n|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=d|0,this.Fh=u|0,this.Fl=h|0,this.Gh=p|0,this.Gl=y|0,this.Hh=f|0,this.Hl=b|0}process(e,t){for(let A=0;A<16;A++,t+=4)V[A]=e.getUint32(t),W[A]=e.getUint32(t+=4);for(let A=16;A<80;A++){const C=V[A-15]|0,G=W[A-15]|0,ot=_.rotrSH(C,G,1)^_.rotrSH(C,G,8)^_.shrSH(C,G,7),at=_.rotrSL(C,G,1)^_.rotrSL(C,G,8)^_.shrSL(C,G,7),q=V[A-2]|0,D=W[A-2]|0,Ce=_.rotrSH(q,D,19)^_.rotrBH(q,D,61)^_.shrSH(q,D,6),ct=_.rotrSL(q,D,19)^_.rotrBL(q,D,61)^_.shrSL(q,D,6),Oe=_.add4L(at,ct,W[A-7],W[A-16]),lt=_.add4H(Oe,ot,Ce,V[A-7],V[A-16]);V[A]=lt|0,W[A]=Oe|0}let{Ah:s,Al:i,Bh:n,Bl:o,Ch:a,Cl:c,Dh:l,Dl:d,Eh:u,El:h,Fh:p,Fl:y,Gh:f,Gl:b,Hh:E,Hl:v}=this;for(let A=0;A<80;A++){const C=_.rotrSH(u,h,14)^_.rotrSH(u,h,18)^_.rotrBH(u,h,41),G=_.rotrSL(u,h,14)^_.rotrSL(u,h,18)^_.rotrBL(u,h,41),ot=u&p^~u&f,at=h&y^~h&b,q=_.add5L(v,G,at,Yi[A],W[A]),D=_.add5H(q,E,C,ot,Qi[A],V[A]),Ce=q|0,ct=_.rotrSH(s,i,28)^_.rotrBH(s,i,34)^_.rotrBH(s,i,39),Oe=_.rotrSL(s,i,28)^_.rotrBL(s,i,34)^_.rotrBL(s,i,39),lt=s&n^s&a^n&a,oi=i&o^i&c^o&c;E=f|0,v=b|0,f=p|0,b=y|0,p=u|0,y=h|0,{h:u,l:h}=_.add(l|0,d|0,D|0,Ce|0),l=a|0,d=c|0,a=n|0,c=o|0,n=s|0,o=i|0;const Zt=_.add3L(Ce,Oe,oi);s=_.add3H(Zt,D,ct,lt),i=Zt|0}({h:s,l:i}=_.add(this.Ah|0,this.Al|0,s|0,i|0)),{h:n,l:o}=_.add(this.Bh|0,this.Bl|0,n|0,o|0),{h:a,l:c}=_.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:d}=_.add(this.Dh|0,this.Dl|0,l|0,d|0),{h:u,l:h}=_.add(this.Eh|0,this.El|0,u|0,h|0),{h:p,l:y}=_.add(this.Fh|0,this.Fl|0,p|0,y|0),{h:f,l:b}=_.add(this.Gh|0,this.Gl|0,f|0,b|0),{h:E,l:v}=_.add(this.Hh|0,this.Hl|0,E|0,v|0),this.set(s,i,n,o,a,c,l,d,u,h,p,y,f,b,E,v)}roundClean(){V.fill(0),W.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const zt=Ut(()=>new en);function Sr(r){if(typeof r!="string")throw new TypeError(`Invalid mnemonic type: ${typeof r}`);return r.normalize("NFKD")}function tn(r){const e=Sr(r),t=e.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:t}}const rn=r=>Sr(`mnemonic${r}`);function sn(r,e=""){return Bi(zt,tn(r).nfkd,rn(e),{c:2048,dkLen:64})}const[Er,Br,kr]=[[],[],[]],nn=BigInt(0),_e=BigInt(1),on=BigInt(2),an=BigInt(7),cn=BigInt(256),ln=BigInt(113);for(let r=0,e=_e,t=1,s=0;r<24;r++){[t,s]=[s,(2*t+3*s)%5],Er.push(2*(5*s+t)),Br.push((r+1)*(r+2)/2%64);let i=nn;for(let n=0;n<7;n++)e=(e<<_e^(e>>an)*ln)%cn,e&on&&(i^=_e<<(_e<<BigInt(n))-_e);kr.push(i)}const[dn,un]=Ar(kr,!0),tr=(r,e,t)=>t>32?zr(r,e,t):xr(r,e,t),rr=(r,e,t)=>t>32?Tr(r,e,t):Ur(r,e,t);function hn(r,e=24){const t=new Uint32Array(10);for(let s=24-e;s<24;s++){for(let o=0;o<10;o++)t[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=t[c],d=t[c+1],u=tr(l,d,1)^t[a],h=rr(l,d,1)^t[a+1];for(let p=0;p<50;p+=10)r[o+p]^=u,r[o+p+1]^=h}let i=r[2],n=r[3];for(let o=0;o<24;o++){const a=Br[o],c=tr(i,n,a),l=rr(i,n,a),d=Er[o];i=r[d],n=r[d+1],r[d]=c,r[d+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}r[0]^=dn[s],r[1]^=un[s]}t.fill(0)}class Tt extends xt{constructor(e,t,s,i=!1,n=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=s,this.enableXOF=i,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Y(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=vi(this.state)}keccak(){hn(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){ae(this);const{blockLen:t,state:s}=this;e=ce(e);const i=e.length;for(let n=0;n<i;){const o=Math.min(t-this.pos,i-n);for(let a=0;a<o;a++)s[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:s,blockLen:i}=this;e[s]^=t,t&128&&s===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){ae(this,!1),At(e),this.finish();const t=this.state,{blockLen:s}=this;for(let i=0,n=e.length;i<n;){this.posOut>=s&&this.keccak();const o=Math.min(s-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Y(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(pr(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:s,outputLen:i,rounds:n,enableXOF:o}=this;return e||(e=new Tt(t,s,i,o,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=s,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const fn=(r,e,t)=>Ut(()=>new Tt(e,r,t)),le=fn(6,136,256/8);async function gn(r){var e;const{params:t,method:s,url:i,headers:n,body:o,overrides:a}=r,c={headers:n,method:s,url:i,params:t,data:o,withCredentials:(e=a==null?void 0:a.WITH_CREDENTIALS)!=null?e:!0};try{const l=await yi(c);return{status:l.status,statusText:l.statusText,data:l.data,headers:l.headers,config:l.config}}catch(l){const d=l;if(d.response)return d.response;throw l}}var pn={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function i(c,l,d){this.fn=c,this.context=l,this.once=d||!1}function n(c,l,d,u,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,u||c,h),y=t?t+l:l;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],p]:c._events[y].push(p):(c._events[y]=p,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new s:delete c._events[l]}function a(){this._events=new s,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],l,d;if(this._eventsCount===0)return c;for(d in l=this._events)e.call(l,d)&&c.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(l)):c},a.prototype.listeners=function(c){var l=t?t+c:c,d=this._events[l];if(!d)return[];if(d.fn)return[d.fn];for(var u=0,h=d.length,p=new Array(h);u<h;u++)p[u]=d[u].fn;return p},a.prototype.listenerCount=function(c){var l=t?t+c:c,d=this._events[l];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,l,d,u,h,p){var y=t?t+c:c;if(!this._events[y])return!1;var f=this._events[y],b=arguments.length,E,v;if(f.fn){switch(f.once&&this.removeListener(c,f.fn,void 0,!0),b){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,l),!0;case 3:return f.fn.call(f.context,l,d),!0;case 4:return f.fn.call(f.context,l,d,u),!0;case 5:return f.fn.call(f.context,l,d,u,h),!0;case 6:return f.fn.call(f.context,l,d,u,h,p),!0}for(v=1,E=new Array(b-1);v<b;v++)E[v-1]=arguments[v];f.fn.apply(f.context,E)}else{var A=f.length,C;for(v=0;v<A;v++)switch(f[v].once&&this.removeListener(c,f[v].fn,void 0,!0),b){case 1:f[v].fn.call(f[v].context);break;case 2:f[v].fn.call(f[v].context,l);break;case 3:f[v].fn.call(f[v].context,l,d);break;case 4:f[v].fn.call(f[v].context,l,d,u);break;default:if(!E)for(C=1,E=new Array(b-1);C<b;C++)E[C-1]=arguments[C];f[v].fn.apply(f[v].context,E)}}return!0},a.prototype.on=function(c,l,d){return n(this,c,l,d,!1)},a.prototype.once=function(c,l,d){return n(this,c,l,d,!0)},a.prototype.removeListener=function(c,l,d,u){var h=t?t+c:c;if(!this._events[h])return this;if(!l)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===l&&(!u||p.once)&&(!d||p.context===d)&&o(this,h);else{for(var y=0,f=[],b=p.length;y<b;y++)(p[y].fn!==l||u&&!p[y].once||d&&p[y].context!==d)&&f.push(p[y]);f.length?this._events[h]=f.length===1?f[0]:f:o(this,h)}return this},a.prototype.removeAllListeners=function(c){var l;return c?(l=t?t+c:c,this._events[l]&&o(this,l)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,r.exports=a})(pn);var Ir=Object.defineProperty,_n=Object.getOwnPropertyDescriptor,Xe=(r,e)=>{for(var t in e)Ir(r,t,{get:e[t],enumerable:!0})},m=(r,e,t,s)=>{for(var i=_n(e,t),n=r.length-1,o;n>=0;n--)(o=r[n])&&(i=o(e,t,i)||i);return i&&Ir(e,t,i),i},yn=/^m(\/[0-9]+')+$/,$r=r=>r.replace("'",""),wn="ed25519 seed",mn=2147483648,bn=r=>{const e=We.create(zt,wn).update(wr(r)).digest(),t=e.slice(0,32),s=e.slice(32);return{key:t,chainCode:s}},vn=({key:r,chainCode:e},t)=>{const s=new ArrayBuffer(4);new DataView(s).setUint32(0,t);const i=new Uint8Array(s),n=new Uint8Array([0]),o=new Uint8Array([...n,...r,...i]),a=We.create(zt,e).update(o).digest(),c=a.slice(0,32),l=a.slice(32);return{key:c,chainCode:l}},An=r=>yn.test(r)?!r.split("/").slice(1).map($r).some(Number.isNaN):!1,xn=(r,e,t=mn)=>{if(!An(r))throw new Error("Invalid derivation path");const{key:s,chainCode:i}=bn(e);return r.split("/").slice(1).map($r).map(n=>parseInt(n,10)).reduce((n,o)=>vn(n,o+t),{key:s,chainCode:i})},Un="1.21.0";async function zn(r){return new Promise(e=>{setTimeout(e,r)})}var sr="/v1";function Tn(r){let e=`${r}`;return e.endsWith("/")&&(e=e.substring(0,e.length-1)),e.endsWith(sr)||(e=`${e}${sr}`),e}var Cr=2e5,Or=20,Sn=20,ft="0x1::aptos_coin::AptosCoin";function Je(r){let e,t,s;return typeof r=="object"?(e=r.hashFunction,t=r.ttlMs,s=r.tags):e=r,(i,n,o)=>{if(o.value!=null)o.value=ir(o.value,e,t,s);else if(o.get!=null)o.get=ir(o.get,e,t,s);else throw new Error("Only put a Memoize() decorator on a method or get accessor.")}}function Lr(r,e){return Je({ttlMs:r,hashFunction:e})}var qe=new Map;function En(r){const e=new Set;for(const t of r){const s=qe.get(t);if(s)for(const i of s)e.has(i)||(i.clear(),e.add(i))}return e.size}function ir(r,e,t=0,s){const i=Symbol("__memoized_map__");return function(...n){let o;const a=this;a.hasOwnProperty(i)||Object.defineProperty(a,i,{configurable:!1,enumerable:!1,writable:!1,value:new Map});const c=a[i];if(Array.isArray(s))for(const l of s)qe.has(l)?qe.get(l).push(c):qe.set(l,[c]);if(e||n.length>0||t>0){let l;e===!0?l=n.map(h=>h.toString()).join("!"):e?l=e.apply(a,n):l=n[0];const d=`${l}__timestamp`;let u=!1;if(t>0)if(!c.has(d))u=!0;else{const h=c.get(d);u=Date.now()-h>t}c.has(l)&&!u?o=c.get(l):(o=r.apply(a,n),c.set(l,o),t>0&&c.set(d,Date.now()))}else{const l=a;c.has(l)?o=c.get(l):(o=r.apply(a,n),c.set(l,o))}return o}}var Nr=class extends Error{constructor(r,e,t){super(t),this.name="AptosApiError",this.url=e.url,this.status=e.status,this.statusText=e.statusText,this.data=e.data,this.request=r}},Bn={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable"};async function kn(r,e,t,s,i,n){const o={...n==null?void 0:n.HEADERS,"x-aptos-client":`aptos-ts-sdk/${Un}`,"content-type":s??"application/json"};return n!=null&&n.TOKEN&&(o.Authorization=`Bearer ${n==null?void 0:n.TOKEN}`),await gn({url:r,method:e,body:t,params:i,headers:o,overrides:n})}async function Hr(r){const{url:e,endpoint:t,method:s,body:i,contentType:n,params:o,overrides:a}=r,c=`${e}/${t??""}`,l=await kn(c,s,i,n,o,a),d={status:l.status,statusText:l.statusText,data:l.data,headers:l.headers,config:l.config,url:c};if(d.status>=200&&d.status<300)return d;const u=Bn[d.status];throw new Nr(r,d,u??"Generic Error")}async function O(r){return await Hr({...r,method:"GET"})}async function we(r){return await Hr({...r,method:"POST"})}async function nr(r){const e=[];let t;const s=r.params;for(;;){s.start=t;const i=await O({url:r.url,endpoint:r.endpoint,params:s,originMethod:r.originMethod,overrides:r.overrides});if(t=i.headers["x-aptos-cursor"],delete i.headers,e.push(...i.data),t==null)break}return e}var gt={mainnet:"https://indexer.mainnet.aptoslabs.com/v1/graphql",testnet:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",devnet:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql",local:"http://127.0.0.1:8090/v1/graphql"},In={mainnet:"https://fullnode.mainnet.aptoslabs.com/v1",testnet:"https://fullnode.testnet.aptoslabs.com/v1",devnet:"https://fullnode.devnet.aptoslabs.com/v1",local:"http://127.0.0.1:8080/v1"},or={"https://fullnode.mainnet.aptoslabs.com/v1":"mainnet","https://fullnode.testnet.aptoslabs.com/v1":"testnet","https://fullnode.devnet.aptoslabs.com/v1":"devnet","http://127.0.0.1:8080/v1":"local"},g=class De{static fromBuffer(e){return De.fromUint8Array(e)}static fromUint8Array(e){return new De(yr(e))}static ensure(e){return typeof e=="string"?new De(e):e}constructor(e){e.startsWith("0x")?this.hexString=e:this.hexString=`0x${e}`}hex(){return this.hexString}noPrefix(){return this.hexString.slice(2)}toString(){return this.hex()}toShortString(){return`0x${this.hexString.replace(/^0x0*/,"")}`}toUint8Array(){return Uint8Array.from(wr(this.noPrefix()))}},x={};Xe(x,{AccountAddress:()=>w,AccountAuthenticator:()=>Z,AccountAuthenticatorEd25519:()=>Jr,AccountAuthenticatorMultiEd25519:()=>Qr,ArgumentABI:()=>tt,AuthenticationKey:()=>mt,ChainId:()=>Pt,ChangeSet:()=>Zn,Ed25519PublicKey:()=>N,Ed25519Signature:()=>M,EntryFunction:()=>Qe,EntryFunctionABI:()=>xe,FeePayerRawTransaction:()=>Lt,Identifier:()=>I,Module:()=>Jn,ModuleId:()=>Ae,MultiAgentRawTransaction:()=>Ot,MultiEd25519PublicKey:()=>Ze,MultiEd25519Signature:()=>Et,MultiSig:()=>ms,MultiSigTransactionPayload:()=>ys,RawTransaction:()=>pe,RawTransactionWithData:()=>Ct,RotationProofChallenge:()=>Yn,Script:()=>$t,ScriptABI:()=>rt,SignedTransaction:()=>Ye,StructTag:()=>ge,Transaction:()=>qs,TransactionArgument:()=>H,TransactionArgumentAddress:()=>Kt,TransactionArgumentBool:()=>Vt,TransactionArgumentU128:()=>Rt,TransactionArgumentU16:()=>Dt,TransactionArgumentU256:()=>Gt,TransactionArgumentU32:()=>Ft,TransactionArgumentU64:()=>Mt,TransactionArgumentU8:()=>qt,TransactionArgumentU8Vector:()=>jt,TransactionAuthenticator:()=>de,TransactionAuthenticatorEd25519:()=>Bt,TransactionAuthenticatorFeePayer:()=>Wr,TransactionAuthenticatorMultiAgent:()=>jr,TransactionAuthenticatorMultiEd25519:()=>kt,TransactionPayload:()=>ke,TransactionPayloadEntryFunction:()=>Ht,TransactionPayloadMultisig:()=>Ss,TransactionPayloadScript:()=>Nt,TransactionScriptABI:()=>Wt,TypeArgumentABI:()=>et,TypeTag:()=>k,TypeTagAddress:()=>ee,TypeTagBool:()=>ue,TypeTagParser:()=>Be,TypeTagParserError:()=>gs,TypeTagSigner:()=>ls,TypeTagStruct:()=>te,TypeTagU128:()=>fe,TypeTagU16:()=>ze,TypeTagU256:()=>Se,TypeTagU32:()=>Te,TypeTagU64:()=>he,TypeTagU8:()=>Q,TypeTagVector:()=>Ee,UserTransaction:()=>Ds,WriteSet:()=>Qn,objectStructTag:()=>jn,optionStructTag:()=>Kn,stringStructTag:()=>It});var $n={};Xe($n,{Deserializer:()=>St,Serializer:()=>U,bcsSerializeBool:()=>Mn,bcsSerializeBytes:()=>X,bcsSerializeFixedBytes:()=>Gn,bcsSerializeStr:()=>Rn,bcsSerializeU128:()=>Dn,bcsSerializeU16:()=>Pn,bcsSerializeU256:()=>Fn,bcsSerializeU32:()=>qn,bcsSerializeU8:()=>pt,bcsSerializeUint64:()=>Hn,bcsToBytes:()=>R,deserializeVector:()=>$,serializeVector:()=>B,serializeVectorWithFunc:()=>Nn});var Cn=2**8-1,On=2**16-1,ve=2**32-1,Pr=BigInt(2**64)-BigInt(1),qr=BigInt(2**128)-BigInt(1),Ln=BigInt(2**256)-BigInt(1),U=class{constructor(){this.buffer=new ArrayBuffer(64),this.offset=0}ensureBufferWillHandleSize(r){for(;this.buffer.byteLength<this.offset+r;){const e=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(e).set(new Uint8Array(this.buffer)),this.buffer=e}}serialize(r){this.ensureBufferWillHandleSize(r.length),new Uint8Array(this.buffer,this.offset).set(r),this.offset+=r.length}serializeWithFunction(r,e,t){this.ensureBufferWillHandleSize(e);const s=new DataView(this.buffer,this.offset);r.apply(s,[0,t,!0]),this.offset+=e}serializeStr(r){const e=new TextEncoder;this.serializeBytes(e.encode(r))}serializeBytes(r){this.serializeU32AsUleb128(r.length),this.serialize(r)}serializeFixedBytes(r){this.serialize(r)}serializeBool(r){if(typeof r!="boolean")throw new Error("Value needs to be a boolean");const e=r?1:0;this.serialize(new Uint8Array([e]))}serializeU8(r){this.serialize(new Uint8Array([r]))}serializeU16(r){this.serializeWithFunction(DataView.prototype.setUint16,2,r)}serializeU32(r){this.serializeWithFunction(DataView.prototype.setUint32,4,r)}serializeU64(r){const e=BigInt(r.toString())&BigInt(ve),t=BigInt(r.toString())>>BigInt(32);this.serializeU32(Number(e)),this.serializeU32(Number(t))}serializeU128(r){const e=BigInt(r.toString())&Pr,t=BigInt(r.toString())>>BigInt(64);this.serializeU64(e),this.serializeU64(t)}serializeU256(r){const e=BigInt(r.toString())&qr,t=BigInt(r.toString())>>BigInt(128);this.serializeU128(e),this.serializeU128(t)}serializeU32AsUleb128(r){let e=r;const t=[];for(;e>>>7;)t.push(e&127|128),e>>>=7;t.push(e),this.serialize(new Uint8Array(t))}getBytes(){return new Uint8Array(this.buffer).slice(0,this.offset)}};m([re(0,Cn)],U.prototype,"serializeU8");m([re(0,On)],U.prototype,"serializeU16");m([re(0,ve)],U.prototype,"serializeU32");m([re(BigInt(0),Pr)],U.prototype,"serializeU64");m([re(BigInt(0),qr)],U.prototype,"serializeU128");m([re(BigInt(0),Ln)],U.prototype,"serializeU256");m([re(0,ve)],U.prototype,"serializeU32AsUleb128");function re(r,e,t){return(s,i,n)=>{const o=n.value;return n.value=function(a){const c=BigInt(a.toString());if(c>BigInt(e.toString())||c<BigInt(r.toString()))throw new Error("Value is out of range");o.apply(this,[a])},n}}var St=class{constructor(r){this.buffer=new ArrayBuffer(r.length),new Uint8Array(this.buffer).set(r,0),this.offset=0}read(r){if(this.offset+r>this.buffer.byteLength)throw new Error("Reached to the end of buffer");const e=this.buffer.slice(this.offset,this.offset+r);return this.offset+=r,e}deserializeStr(){const r=this.deserializeBytes();return new TextDecoder().decode(r)}deserializeBytes(){const r=this.deserializeUleb128AsU32();return new Uint8Array(this.read(r))}deserializeFixedBytes(r){return new Uint8Array(this.read(r))}deserializeBool(){const r=new Uint8Array(this.read(1))[0];if(r!==1&&r!==0)throw new Error("Invalid boolean value");return r===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){const r=this.deserializeU32(),e=this.deserializeU32();return BigInt(BigInt(e)<<BigInt(32)|BigInt(r))}deserializeU128(){const r=this.deserializeU64(),e=this.deserializeU64();return BigInt(e<<BigInt(64)|r)}deserializeU256(){const r=this.deserializeU128(),e=this.deserializeU128();return BigInt(e<<BigInt(128)|r)}deserializeUleb128AsU32(){let r=BigInt(0),e=0;for(;r<ve;){const t=this.deserializeU8();if(r|=BigInt(t&127)<<BigInt(e),!(t&128))break;e+=7}if(r>ve)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(r)}};function B(r,e){e.serializeU32AsUleb128(r.length),r.forEach(t=>{t.serialize(e)})}function Nn(r,e){const t=new U;t.serializeU32AsUleb128(r.length);const s=t[e];return r.forEach(i=>{s.call(t,i)}),t.getBytes()}function $(r,e){const t=r.deserializeUleb128AsU32(),s=[];for(let i=0;i<t;i+=1)s.push(e.deserialize(r));return s}function R(r){const e=new U;return r.serialize(e),e.getBytes()}function Hn(r){const e=new U;return e.serializeU64(r),e.getBytes()}function pt(r){const e=new U;return e.serializeU8(r),e.getBytes()}function Pn(r){const e=new U;return e.serializeU16(r),e.getBytes()}function qn(r){const e=new U;return e.serializeU32(r),e.getBytes()}function Dn(r){const e=new U;return e.serializeU128(r),e.getBytes()}function Fn(r){const e=new U;return e.serializeU256(r),e.getBytes()}function Mn(r){const e=new U;return e.serializeBool(r),e.getBytes()}function Rn(r){const e=new U;return e.serializeStr(r),e.getBytes()}function X(r){const e=new U;return e.serializeBytes(r),e.getBytes()}function Gn(r){const e=new U;return e.serializeFixedBytes(r),e.getBytes()}var Ke=class L{constructor(e){if(e.length!==L.LENGTH)throw new Error("Expected address of length 32");this.address=e}static fromHex(e){let t=g.ensure(e);t.noPrefix().length%2!==0&&(t=new g(`0${t.noPrefix()}`));const s=t.toUint8Array();if(s.length>L.LENGTH)throw new Error("Hex string is too long. Address's length is 32 bytes.");if(s.length===L.LENGTH)return new L(s);const i=new Uint8Array(L.LENGTH);return i.set(s,L.LENGTH-s.length),new L(i)}static isValid(e){if(e==="")return!1;let t=g.ensure(e);return t.noPrefix().length%2!==0&&(t=new g(`0${t.noPrefix()}`)),t.toUint8Array().length<=L.LENGTH}toHexString(){return g.fromUint8Array(this.address).hex()}serialize(e){e.serializeFixedBytes(this.address)}static deserialize(e){return new L(e.deserializeFixedBytes(L.LENGTH))}static standardizeAddress(e){const t=e.toLowerCase();return`0x${(t.startsWith("0x")?t.slice(2):t).padStart(64,"0")}`}};Ke.LENGTH=32;Ke.CORE_CODE_ADDRESS=Ke.fromHex("0x1");var w=Ke,Dr=class Fe{constructor(e){if(e.length!==Fe.LENGTH)throw new Error(`Ed25519PublicKey length should be ${Fe.LENGTH}`);this.value=e}toBytes(){return this.value}serialize(e){e.serializeBytes(this.value)}static deserialize(e){const t=e.deserializeBytes();return new Fe(t)}};Dr.LENGTH=32;var N=Dr,Fr=class Me{constructor(e){if(this.value=e,e.length!==Me.LENGTH)throw new Error(`Ed25519Signature length should be ${Me.LENGTH}`)}serialize(e){e.serializeBytes(this.value)}static deserialize(e){const t=e.deserializeBytes();return new Me(t)}};Fr.LENGTH=64;var M=Fr,_t=32,Ze=class Mr{constructor(e,t){if(this.public_keys=e,this.threshold=t,t>_t)throw new Error(`"threshold" cannot be larger than ${_t}`)}toBytes(){const e=new Uint8Array(this.public_keys.length*N.LENGTH+1);return this.public_keys.forEach((t,s)=>{e.set(t.value,s*N.LENGTH)}),e[this.public_keys.length*N.LENGTH]=this.threshold,e}serialize(e){e.serializeBytes(this.toBytes())}static deserialize(e){const t=e.deserializeBytes(),s=t[t.length-1],i=[];for(let n=0;n<t.length-1;n+=N.LENGTH){const o=n;i.push(new N(t.subarray(o,o+N.LENGTH)))}return new Mr(i,s)}},Rr=class me{constructor(e,t){if(this.signatures=e,this.bitmap=t,t.length!==me.BITMAP_LEN)throw new Error(`"bitmap" length should be ${me.BITMAP_LEN}`)}toBytes(){const e=new Uint8Array(this.signatures.length*M.LENGTH+me.BITMAP_LEN);return this.signatures.forEach((t,s)=>{e.set(t.value,s*M.LENGTH)}),e.set(this.bitmap,this.signatures.length*M.LENGTH),e}static createBitmap(e){const t=new Uint8Array([0,0,0,0]),s=new Set;return e.forEach(i=>{if(i>=_t)throw new Error(`Invalid bit value ${i}.`);if(s.has(i))throw new Error("Duplicated bits detected.");s.add(i);const n=Math.floor(i/8);let o=t[n];o|=128>>i%8,t[n]=o}),t}serialize(e){e.serializeBytes(this.toBytes())}static deserialize(e){const t=e.deserializeBytes(),s=t.subarray(t.length-4),i=[];for(let n=0;n<t.length-s.length;n+=M.LENGTH){const o=n;i.push(new M(t.subarray(o,o+M.LENGTH)))}return new me(i,s)}};Rr.BITMAP_LEN=4;var Et=Rr,de=class{static deserialize(r){const e=r.deserializeUleb128AsU32();switch(e){case 0:return Bt.load(r);case 1:return kt.load(r);case 2:return jr.load(r);case 3:return Wr.load(r);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${e}`)}}},Bt=class Gr extends de{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=N.deserialize(e),s=M.deserialize(e);return new Gr(t,s)}},kt=class Kr extends de{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=Ze.deserialize(e),s=Et.deserialize(e);return new Kr(t,s)}},jr=class Vr extends de{constructor(e,t,s){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=s}serialize(e){e.serializeU32AsUleb128(2),this.sender.serialize(e),B(this.secondary_signer_addresses,e),B(this.secondary_signers,e)}static load(e){const t=Z.deserialize(e),s=$(e,w),i=$(e,Z);return new Vr(t,s,i)}},Wr=class Xr extends de{constructor(e,t,s,i){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=s,this.fee_payer=i}serialize(e){e.serializeU32AsUleb128(3),this.sender.serialize(e),B(this.secondary_signer_addresses,e),B(this.secondary_signers,e),this.fee_payer.address.serialize(e),this.fee_payer.authenticator.serialize(e)}static load(e){const t=Z.deserialize(e),s=$(e,w),i=$(e,Z),n=w.deserialize(e),o=Z.deserialize(e),a={address:n,authenticator:o};return new Xr(t,s,i,a)}},Z=class{static deserialize(r){const e=r.deserializeUleb128AsU32();switch(e){case 0:return Jr.load(r);case 1:return Qr.load(r);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${e}`)}}},Jr=class Zr extends Z{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=N.deserialize(e),s=M.deserialize(e);return new Zr(t,s)}},Qr=class Yr extends Z{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=Ze.deserialize(e),s=Et.deserialize(e);return new Yr(t,s)}},I=class es{constructor(e){this.value=e}serialize(e){e.serializeStr(this.value)}static deserialize(e){const t=e.deserializeStr();return new es(t)}},k=class{static deserialize(r){const e=r.deserializeUleb128AsU32();switch(e){case 0:return ue.load(r);case 1:return Q.load(r);case 2:return he.load(r);case 3:return fe.load(r);case 4:return ee.load(r);case 5:return ls.load(r);case 6:return Ee.load(r);case 7:return te.load(r);case 8:return ze.load(r);case 9:return Te.load(r);case 10:return Se.load(r);default:throw new Error(`Unknown variant index for TypeTag: ${e}`)}}},ue=class ts extends k{serialize(e){e.serializeU32AsUleb128(0)}static load(e){return new ts}},Q=class rs extends k{serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new rs}},ze=class ss extends k{serialize(e){e.serializeU32AsUleb128(8)}static load(e){return new ss}},Te=class is extends k{serialize(e){e.serializeU32AsUleb128(9)}static load(e){return new is}},he=class ns extends k{serialize(e){e.serializeU32AsUleb128(2)}static load(e){return new ns}},fe=class os extends k{serialize(e){e.serializeU32AsUleb128(3)}static load(e){return new os}},Se=class as extends k{serialize(e){e.serializeU32AsUleb128(10)}static load(e){return new as}},ee=class cs extends k{serialize(e){e.serializeU32AsUleb128(4)}static load(e){return new cs}},ls=class ds extends k{serialize(e){e.serializeU32AsUleb128(5)}static load(e){return new ds}},Ee=class us extends k{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(6),this.value.serialize(e)}static load(e){const t=k.deserialize(e);return new us(t)}},te=class hs extends k{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(7),this.value.serialize(e)}static load(e){const t=ge.deserialize(e);return new hs(t)}isStringTypeTag(){return this.value.module_name.value==="string"&&this.value.name.value==="String"&&this.value.address.toHexString()===w.CORE_CODE_ADDRESS.toHexString()}},ge=class yt{constructor(e,t,s,i){this.address=e,this.module_name=t,this.name=s,this.type_args=i}static fromString(e){const t=new Be(e).parseTypeTag();return new yt(t.value.address,t.value.module_name,t.value.name,t.value.type_args)}serialize(e){this.address.serialize(e),this.module_name.serialize(e),this.name.serialize(e),B(this.type_args,e)}static deserialize(e){const t=w.deserialize(e),s=I.deserialize(e),i=I.deserialize(e),n=$(e,k);return new yt(t,s,i,n)}},It=new ge(w.fromHex("0x1"),new I("string"),new I("String"),[]);function Kn(r){return new ge(w.fromHex("0x1"),new I("option"),new I("Option"),[r])}function jn(r){return new ge(w.fromHex("0x1"),new I("object"),new I("Object"),[r])}function J(r){throw new gs(r)}function ar(r){return!!r.match(/\s/)}function cr(r){return!!r.match(/[_A-Za-z0-9]/g)}function Vn(r){return!!r.match(/T\d+/g)}function Wn(r,e){const t=r[e];if(t===":"){if(r.slice(e,e+2)==="::")return[["COLON","::"],2];J("Unrecognized token.")}else{if(t==="<")return[["LT","<"],1];if(t===">")return[["GT",">"],1];if(t===",")return[["COMMA",","],1];if(ar(t)){let s="";for(let i=e;i<r.length;i+=1){const n=r[i];if(ar(n))s=`${s}${n}`;else break}return[["SPACE",s],s.length]}else if(cr(t)){let s="";for(let i=e;i<r.length;i+=1){const n=r[i];if(cr(n))s=`${s}${n}`;else break}return Vn(s)?[["GENERIC",s],s.length]:[["IDENT",s],s.length]}}throw new Error("Unrecognized token.")}function Xn(r){let e=0;const t=[];for(;e<r.length;){const[s,i]=Wn(r,e);s[0]!=="SPACE"&&t.push(s),e+=i}return t}var Be=class fs{constructor(e,t){this.typeTags=[],this.tokens=Xn(e),this.typeTags=t||[]}consume(e){const t=this.tokens.shift();(!t||t[1]!==e)&&J("Invalid type tag.")}consumeWholeGeneric(){for(this.consume("<");this.tokens[0][1]!==">";)this.tokens[0][1]==="<"?this.consumeWholeGeneric():this.tokens.shift();this.consume(">")}parseCommaList(e,t){const s=[];for(this.tokens.length<=0&&J("Invalid type tag.");this.tokens[0][1]!==e&&(s.push(this.parseTypeTag()),!(this.tokens.length>0&&this.tokens[0][1]===e||(this.consume(","),this.tokens.length>0&&this.tokens[0][1]===e&&t)));)this.tokens.length<=0&&J("Invalid type tag.");return s}parseTypeTag(){this.tokens.length===0&&J("Invalid type tag.");const[e,t]=this.tokens.shift();if(t==="u8")return new Q;if(t==="u16")return new ze;if(t==="u32")return new Te;if(t==="u64")return new he;if(t==="u128")return new fe;if(t==="u256")return new Se;if(t==="bool")return new ue;if(t==="address")return new ee;if(t==="vector"){this.consume("<");const s=this.parseTypeTag();return this.consume(">"),new Ee(s)}if(t==="string")return new te(It);if(e==="IDENT"&&(t.startsWith("0x")||t.startsWith("0X"))){const s=w.fromHex(t);this.consume("::");const[i,n]=this.tokens.shift();i!=="IDENT"&&J("Invalid type tag."),this.consume("::");const[o,a]=this.tokens.shift();if(o!=="IDENT"&&J("Invalid type tag."),w.CORE_CODE_ADDRESS.toHexString()===s.toHexString()&&n==="object"&&a==="Object")return this.consumeWholeGeneric(),new ee;let c=[];this.tokens.length>0&&this.tokens[0][1]==="<"&&(this.consume("<"),c=this.parseCommaList(">",!0),this.consume(">"));const l=new ge(s,new I(n),new I(a),c);return new te(l)}if(e==="GENERIC"){this.typeTags.length===0&&J("Can't convert generic type since no typeTags were specified.");const s=parseInt(t.substring(1),10);return new fs(this.typeTags[s]).parseTypeTag()}throw new Error("Invalid type tag.")}},gs=class extends Error{constructor(r){super(r),this.name="TypeTagParserError"}},pe=class ps{constructor(e,t,s,i,n,o,a){this.sender=e,this.sequence_number=t,this.payload=s,this.max_gas_amount=i,this.gas_unit_price=n,this.expiration_timestamp_secs=o,this.chain_id=a}serialize(e){this.sender.serialize(e),e.serializeU64(this.sequence_number),this.payload.serialize(e),e.serializeU64(this.max_gas_amount),e.serializeU64(this.gas_unit_price),e.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(e)}static deserialize(e){const t=w.deserialize(e),s=e.deserializeU64(),i=ke.deserialize(e),n=e.deserializeU64(),o=e.deserializeU64(),a=e.deserializeU64(),c=Pt.deserialize(e);return new ps(t,s,i,n,o,a,c)}},$t=class _s{constructor(e,t,s){this.code=e,this.ty_args=t,this.args=s}serialize(e){e.serializeBytes(this.code),B(this.ty_args,e),B(this.args,e)}static deserialize(e){const t=e.deserializeBytes(),s=$(e,k),i=$(e,H);return new _s(t,s,i)}},Qe=class Re{constructor(e,t,s,i){this.module_name=e,this.function_name=t,this.ty_args=s,this.args=i}static natural(e,t,s,i){return new Re(Ae.fromStr(e),new I(t),s,i)}static natual(e,t,s,i){return Re.natural(e,t,s,i)}serialize(e){this.module_name.serialize(e),this.function_name.serialize(e),B(this.ty_args,e),e.serializeU32AsUleb128(this.args.length),this.args.forEach(t=>{e.serializeBytes(t)})}static deserialize(e){const t=Ae.deserialize(e),s=I.deserialize(e),i=$(e,k),n=e.deserializeUleb128AsU32(),o=[];for(let c=0;c<n;c+=1)o.push(e.deserializeBytes());const a=o;return new Re(t,s,i,a)}},ys=class ws{constructor(e){this.transaction_payload=e}serialize(e){e.serializeU32AsUleb128(0),this.transaction_payload.serialize(e)}static deserialize(e){return e.deserializeUleb128AsU32(),new ws(Qe.deserialize(e))}},ms=class bs{constructor(e,t){this.multisig_address=e,this.transaction_payload=t}serialize(e){this.multisig_address.serialize(e),this.transaction_payload===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.transaction_payload.serialize(e))}static deserialize(e){const t=w.deserialize(e),s=e.deserializeBool();let i;return s&&(i=ys.deserialize(e)),new bs(t,i)}},Jn=class vs{constructor(e){this.code=e}serialize(e){e.serializeBytes(this.code)}static deserialize(e){const t=e.deserializeBytes();return new vs(t)}},Ae=class wt{constructor(e,t){this.address=e,this.name=t}static fromStr(e){const t=e.split("::");if(t.length!==2)throw new Error("Invalid module id.");return new wt(w.fromHex(new g(t[0])),new I(t[1]))}serialize(e){this.address.serialize(e),this.name.serialize(e)}static deserialize(e){const t=w.deserialize(e),s=I.deserialize(e);return new wt(t,s)}},Zn=class{serialize(r){throw new Error("Not implemented.")}static deserialize(r){throw new Error("Not implemented.")}},Qn=class{serialize(r){throw new Error("Not implmented.")}static deserialize(r){throw new Error("Not implmented.")}},Ye=class As{constructor(e,t){this.raw_txn=e,this.authenticator=t}serialize(e){this.raw_txn.serialize(e),this.authenticator.serialize(e)}static deserialize(e){const t=pe.deserialize(e),s=de.deserialize(e);return new As(t,s)}},Ct=class{static deserialize(r){const e=r.deserializeUleb128AsU32();switch(e){case 0:return Ot.load(r);case 1:return Lt.load(r);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${e}`)}}},Ot=class xs extends Ct{constructor(e,t){super(),this.raw_txn=e,this.secondary_signer_addresses=t}serialize(e){e.serializeU32AsUleb128(0),this.raw_txn.serialize(e),B(this.secondary_signer_addresses,e)}static load(e){const t=pe.deserialize(e),s=$(e,w);return new xs(t,s)}},Lt=class Us extends Ct{constructor(e,t,s){super(),this.raw_txn=e,this.secondary_signer_addresses=t,this.fee_payer_address=s}serialize(e){e.serializeU32AsUleb128(1),this.raw_txn.serialize(e),B(this.secondary_signer_addresses,e),this.fee_payer_address.serialize(e)}static load(e){const t=pe.deserialize(e),s=$(e,w),i=w.deserialize(e);return new Us(t,s,i)}},ke=class{static deserialize(r){const e=r.deserializeUleb128AsU32();switch(e){case 0:return Nt.load(r);case 2:return Ht.load(r);case 3:return Ss.load(r);default:throw new Error(`Unknown variant index for TransactionPayload: ${e}`)}}},Nt=class zs extends ke{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(0),this.value.serialize(e)}static load(e){const t=$t.deserialize(e);return new zs(t)}},Ht=class Ts extends ke{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(2),this.value.serialize(e)}static load(e){const t=Qe.deserialize(e);return new Ts(t)}},Ss=class Es extends ke{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(3),this.value.serialize(e)}static load(e){const t=ms.deserialize(e);return new Es(t)}},Pt=class Bs{constructor(e){this.value=e}serialize(e){e.serializeU8(this.value)}static deserialize(e){const t=e.deserializeU8();return new Bs(t)}},H=class{static deserialize(r){const e=r.deserializeUleb128AsU32();switch(e){case 0:return qt.load(r);case 1:return Mt.load(r);case 2:return Rt.load(r);case 3:return Kt.load(r);case 4:return jt.load(r);case 5:return Vt.load(r);case 6:return Dt.load(r);case 7:return Ft.load(r);case 8:return Gt.load(r);default:throw new Error(`Unknown variant index for TransactionArgument: ${e}`)}}},qt=class ks extends H{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(0),e.serializeU8(this.value)}static load(e){const t=e.deserializeU8();return new ks(t)}},Dt=class Is extends H{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(6),e.serializeU16(this.value)}static load(e){const t=e.deserializeU16();return new Is(t)}},Ft=class $s extends H{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(7),e.serializeU32(this.value)}static load(e){const t=e.deserializeU32();return new $s(t)}},Mt=class Cs extends H{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(1),e.serializeU64(this.value)}static load(e){const t=e.deserializeU64();return new Cs(t)}},Rt=class Os extends H{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(2),e.serializeU128(this.value)}static load(e){const t=e.deserializeU128();return new Os(t)}},Gt=class Ls extends H{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(8),e.serializeU256(this.value)}static load(e){const t=e.deserializeU256();return new Ls(t)}},Kt=class Ns extends H{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(3),this.value.serialize(e)}static load(e){const t=w.deserialize(e);return new Ns(t)}},jt=class Hs extends H{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(4),e.serializeBytes(this.value)}static load(e){const t=e.deserializeBytes();return new Hs(t)}},Vt=class Ps extends H{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(5),e.serializeBool(this.value)}static load(e){const t=e.deserializeBool();return new Ps(t)}},qs=class{getHashSalt(){const r=le.create();return r.update("APTOS::Transaction"),r.digest()}static deserialize(r){const e=r.deserializeUleb128AsU32();switch(e){case 0:return Ds.load(r);default:throw new Error(`Unknown variant index for Transaction: ${e}`)}}},Ds=class Fs extends qs{constructor(e){super(),this.value=e}hash(){const e=le.create();return e.update(this.getHashSalt()),e.update(R(this)),e.digest()}serialize(e){e.serializeU32AsUleb128(0),this.value.serialize(e)}static load(e){return new Fs(Ye.deserialize(e))}},et=class Ms{constructor(e){this.name=e}serialize(e){e.serializeStr(this.name)}static deserialize(e){const t=e.deserializeStr();return new Ms(t)}},tt=class Rs{constructor(e,t){this.name=e,this.type_tag=t}serialize(e){e.serializeStr(this.name),this.type_tag.serialize(e)}static deserialize(e){const t=e.deserializeStr(),s=k.deserialize(e);return new Rs(t,s)}},rt=class{static deserialize(r){const e=r.deserializeUleb128AsU32();switch(e){case 0:return Wt.load(r);case 1:return xe.load(r);default:throw new Error(`Unknown variant index for TransactionPayload: ${e}`)}}},Wt=class Gs extends rt{constructor(e,t,s,i,n){super(),this.name=e,this.doc=t,this.code=s,this.ty_args=i,this.args=n}serialize(e){e.serializeU32AsUleb128(0),e.serializeStr(this.name),e.serializeStr(this.doc),e.serializeBytes(this.code),B(this.ty_args,e),B(this.args,e)}static load(e){const t=e.deserializeStr(),s=e.deserializeStr(),i=e.deserializeBytes(),n=$(e,et),o=$(e,tt);return new Gs(t,s,i,n,o)}},xe=class Ks extends rt{constructor(e,t,s,i,n){super(),this.name=e,this.module_name=t,this.doc=s,this.ty_args=i,this.args=n}serialize(e){e.serializeU32AsUleb128(1),e.serializeStr(this.name),this.module_name.serialize(e),e.serializeStr(this.doc),B(this.ty_args,e),B(this.args,e)}static load(e){const t=e.deserializeStr(),s=Ae.deserialize(e),i=e.deserializeStr(),n=$(e,et),o=$(e,tt);return new Ks(t,s,i,n,o)}},Ie=class se{constructor(e){if(e.length!==se.LENGTH)throw new Error("Expected a byte array of length 32");this.bytes=e}static fromMultiEd25519PublicKey(e){const t=e.toBytes(),s=new Uint8Array(t.length+1);s.set(t),s.set([se.MULTI_ED25519_SCHEME],t.length);const i=le.create();return i.update(s),new se(i.digest())}static fromEd25519PublicKey(e){const t=e.value,s=new Uint8Array(t.length+1);s.set(t),s.set([se.ED25519_SCHEME],t.length);const i=le.create();return i.update(s),new se(i.digest())}derivedAddress(){return g.fromUint8Array(this.bytes)}};Ie.LENGTH=32;Ie.MULTI_ED25519_SCHEME=1;Ie.ED25519_SCHEME=0;Ie.DERIVE_RESOURCE_ACCOUNT_SCHEME=255;var mt=Ie,Yn=class{constructor(r,e,t,s,i,n,o){this.accountAddress=r,this.moduleName=e,this.structName=t,this.sequenceNumber=s,this.originator=i,this.currentAuthKey=n,this.newPublicKey=o}serialize(r){this.accountAddress.serialize(r),r.serializeStr(this.moduleName),r.serializeStr(this.structName),r.serializeU64(this.sequenceNumber),this.originator.serialize(r),this.currentAuthKey.serialize(r),r.serializeBytes(this.newPublicKey)}},js=class Ge{static fromAptosAccountObject(e){return new Ge(g.ensure(e.privateKeyHex).toUint8Array(),e.address)}static isValidPath(e){return/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'+$/.test(e)}static fromDerivePath(e,t){if(!Ge.isValidPath(e))throw new Error("Invalid derivation path");const s=t.trim().split(/\s+/).map(n=>n.toLowerCase()).join(" "),{key:i}=xn(e,yr(sn(s)));return new Ge(i)}constructor(e,t){e?this.signingKey=Le.sign.keyPair.fromSeed(e.slice(0,32)):this.signingKey=Le.sign.keyPair(),this.accountAddress=g.ensure(t||this.authKey().hex())}address(){return this.accountAddress}authKey(){const e=new N(this.signingKey.publicKey);return mt.fromEd25519PublicKey(e).derivedAddress()}static getResourceAccountAddress(e,t){const s=R(w.fromHex(e)),i=new Uint8Array([...s,...t,mt.DERIVE_RESOURCE_ACCOUNT_SCHEME]),n=le.create();return n.update(i),g.fromUint8Array(n.digest())}static getCollectionID(e,t){const s=new TextEncoder().encode(`${e}::${t}`),i=Li.create();return i.update(s),g.fromUint8Array(i.digest())}pubKey(){return g.fromUint8Array(this.signingKey.publicKey)}signBuffer(e){const t=Le.sign.detached(e,this.signingKey.secretKey);return g.fromUint8Array(t)}signHexString(e){const t=g.ensure(e).toUint8Array();return this.signBuffer(t)}verifySignature(e,t){const s=g.ensure(e).toUint8Array(),i=g.ensure(t).toUint8Array();return Le.sign.detached.verify(s,i,this.signingKey.publicKey)}toPrivateKeyObject(){return{address:this.address().hex(),publicKeyHex:this.pubKey().hex(),privateKeyHex:g.fromUint8Array(this.signingKey.secretKey.slice(0,32)).hex()}}};m([Je()],js.prototype,"authKey");var je=js;function He(r){return r instanceof je?r.address():g.ensure(r)}var $e=`
    fragment CurrentTokenOwnershipFields on current_token_ownerships_v2 {
  token_standard
  token_properties_mutated_v1
  token_data_id
  table_type_v1
  storage_id
  property_version_v1
  owner_address
  last_transaction_version
  last_transaction_timestamp
  is_soulbound_v2
  is_fungible_v2
  amount
  current_token_data {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `,eo=`
    fragment TokenDataFields on current_token_datas {
  creator_address
  collection_name
  description
  metadata_uri
  name
  token_data_id_hash
  collection_data_id_hash
}
    `,to=`
    fragment CollectionDataFields on current_collection_datas {
  metadata_uri
  supply
  description
  collection_name
  collection_data_id_hash
  table_handle
  creator_address
}
    `,Vs=`
    fragment TokenActivitiesFields on token_activities_v2 {
  after_value
  before_value
  entry_function_id_str
  event_account_address
  event_index
  from_address
  is_fungible_v2
  property_version_v1
  to_address
  token_amount
  token_data_id
  token_standard
  transaction_timestamp
  transaction_version
  type
}
    `,ro=`
    query getAccountCoinsDataCount($address: String) {
  current_fungible_asset_balances_aggregate(
    where: {owner_address: {_eq: $address}}
  ) {
    aggregate {
      count
    }
  }
}
    `,so=`
    query getAccountCoinsData($where_condition: current_fungible_asset_balances_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_fungible_asset_balances_order_by!]) {
  current_fungible_asset_balances(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    amount
    asset_type
    is_frozen
    is_primary
    last_transaction_timestamp
    last_transaction_version
    owner_address
    storage_id
    token_standard
    metadata {
      token_standard
      symbol
      supply_aggregator_table_key_v1
      supply_aggregator_table_handle_v1
      project_uri
      name
      last_transaction_version
      last_transaction_timestamp
      icon_uri
      decimals
      creator_address
      asset_type
    }
  }
}
    `,io=`
    query getAccountCurrentTokens($address: String!, $offset: Int, $limit: Int) {
  current_token_ownerships(
    where: {owner_address: {_eq: $address}, amount: {_gt: 0}}
    order_by: [{last_transaction_version: desc}, {creator_address: asc}, {collection_name: asc}, {name: asc}]
    offset: $offset
    limit: $limit
  ) {
    amount
    current_token_data {
      ...TokenDataFields
    }
    current_collection_data {
      ...CollectionDataFields
    }
    last_transaction_version
    property_version
  }
}
    ${eo}
${to}`,no=`
    query getAccountTokensCount($where_condition: current_token_ownerships_v2_bool_exp, $offset: Int, $limit: Int) {
  current_token_ownerships_v2_aggregate(
    where: $where_condition
    offset: $offset
    limit: $limit
  ) {
    aggregate {
      count
    }
  }
}
    `,oo=`
    query getAccountTransactionsCount($address: String) {
  account_transactions_aggregate(where: {account_address: {_eq: $address}}) {
    aggregate {
      count
    }
  }
}
    `,ao=`
    query getAccountTransactionsData($where_condition: account_transactions_bool_exp!, $offset: Int, $limit: Int, $order_by: [account_transactions_order_by!]) {
  account_transactions(
    where: $where_condition
    order_by: $order_by
    limit: $limit
    offset: $offset
  ) {
    token_activities_v2 {
      ...TokenActivitiesFields
    }
    transaction_version
    account_address
  }
}
    ${Vs}`,co=`
    query getCollectionData($where_condition: current_collections_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collections_v2_order_by!]) {
  current_collections_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    collection_id
    collection_name
    creator_address
    current_supply
    description
    last_transaction_timestamp
    last_transaction_version
    max_supply
    mutable_description
    mutable_uri
    table_handle_v1
    token_standard
    total_minted_v2
    uri
  }
}
    `,lo=`
    query getCollectionsWithOwnedTokens($where_condition: current_collection_ownership_v2_view_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collection_ownership_v2_view_order_by!]) {
  current_collection_ownership_v2_view(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      mutable_description
      max_supply
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
    collection_id
    collection_name
    collection_uri
    creator_address
    distinct_tokens
    last_transaction_version
    owner_address
    single_token_uri
  }
}
    `,uo=`
    query getCurrentObjects($where_condition: current_objects_bool_exp, $offset: Int, $limit: Int, $order_by: [current_objects_order_by!]) {
  current_objects(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    allow_ungated_transfer
    state_key_hash
    owner_address
    object_address
    last_transaction_version
    last_guid_creation_num
    is_deleted
  }
}
    `,ho=`
    query getDelegatedStakingActivities($delegatorAddress: String, $poolAddress: String) {
  delegated_staking_activities(
    where: {delegator_address: {_eq: $delegatorAddress}, pool_address: {_eq: $poolAddress}}
  ) {
    amount
    delegator_address
    event_index
    event_type
    pool_address
    transaction_version
  }
}
    `,fo=`
    query getIndexerLedgerInfo {
  ledger_infos {
    chain_id
  }
}
    `,go=`
    query getNumberOfDelegators($poolAddress: String) {
  num_active_delegator_per_pool(
    where: {pool_address: {_eq: $poolAddress}, num_active_delegator: {_gt: "0"}}
    distinct_on: pool_address
  ) {
    num_active_delegator
    pool_address
  }
}
    `,po=`
    query getOwnedTokens($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${$e}`,_o=`
    query getOwnedTokensByTokenData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${$e}`,yo=`
    query getTokenActivities($where_condition: token_activities_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [token_activities_v2_order_by!]) {
  token_activities_v2(
    where: $where_condition
    order_by: $order_by
    offset: $offset
    limit: $limit
  ) {
    ...TokenActivitiesFields
  }
}
    ${Vs}`,wo=`
    query getTokenActivitiesCount($token_id: String) {
  token_activities_v2_aggregate(where: {token_data_id: {_eq: $token_id}}) {
    aggregate {
      count
    }
  }
}
    `,mo=`
    query getTokenCurrentOwnerData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${$e}`,bo=`
    query getTokenData($where_condition: current_token_datas_v2_bool_exp, $offset: Int, $limit: Int, $order_by: [current_token_datas_v2_order_by!]) {
  current_token_datas_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `,vo=`
    query getTokenOwnedFromCollection($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${$e}`,Ao=`
    query getTokenOwnersData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${$e}`,xo=`
    query getTopUserTransactions($limit: Int) {
  user_transactions(limit: $limit, order_by: {version: desc}) {
    version
  }
}
    `,Uo=`
    query getUserTransactions($where_condition: user_transactions_bool_exp!, $offset: Int, $limit: Int, $order_by: [user_transactions_order_by!]) {
  user_transactions(
    order_by: $order_by
    where: $where_condition
    limit: $limit
    offset: $offset
  ) {
    version
  }
}
    `;function st(r,e,t){if(!(e!=null&&e.includes(typeof r)))throw new Error(`Invalid arg: ${r} type should be ${e instanceof Array?e.join(" or "):e}`)}function Ws(r){if(st(r,["boolean","string"]),typeof r=="boolean")return r;if(r==="true")return!0;if(r==="false")return!1;throw new Error("Invalid boolean string.")}function ne(r){if(st(r,["number","string"]),typeof r=="number")return r;const e=Number.parseInt(r,10);if(Number.isNaN(e))throw new Error("Invalid number string.");return e}function oe(r){return st(r,["number","bigint","string"]),BigInt(r)}function zo(r,e,t){Xt(r,e,t)}function Xt(r,e,t,s){if(e instanceof ue)t.serializeBool(Ws(r));else if(e instanceof Q)t.serializeU8(ne(r));else if(e instanceof ze)t.serializeU16(ne(r));else if(e instanceof Te)t.serializeU32(ne(r));else if(e instanceof he)t.serializeU64(oe(r));else if(e instanceof fe)t.serializeU128(oe(r));else if(e instanceof Se)t.serializeU256(oe(r));else if(e instanceof ee)Xs(r,t);else if(e instanceof Ee)To(r,e,t);else if(e instanceof te)So(r,e,t);else throw new Error("Unsupported arg type.")}function Xs(r,e){let t;if(typeof r=="string"||r instanceof g)t=w.fromHex(r);else if(r instanceof w)t=r;else throw new Error("Invalid account address.");t.serialize(e)}function To(r,e,t,s){if(e.value instanceof Q){if(r instanceof Uint8Array){t.serializeBytes(r);return}if(r instanceof g){t.serializeBytes(r.toUint8Array());return}if(typeof r=="string"){t.serializeStr(r);return}}if(!Array.isArray(r))throw new Error("Invalid vector args.");t.serializeU32AsUleb128(r.length),r.forEach(i=>Xt(i,e.value,t))}function So(r,e,t,s){const{address:i,module_name:n,name:o,type_args:a}=e.value,c=`${g.fromUint8Array(i.address).toShortString()}::${n.value}::${o.value}`;if(c==="0x1::string::String")st(r,["string"]),t.serializeStr(r);else if(c==="0x1::object::Object")Xs(r,t);else if(c==="0x1::option::Option"){if(a.length!==1)throw new Error(`Option has the wrong number of type arguments ${a.length}`);Eo(r,a[0],t)}else throw new Error("Unsupported struct type in function argument")}function Eo(r,e,t,s){r==null?t.serializeU32AsUleb128(0):(t.serializeU32AsUleb128(1),Xt(r,e,t))}function Bo(r,e){if(e instanceof ue)return new Vt(Ws(r));if(e instanceof Q)return new qt(ne(r));if(e instanceof ze)return new Dt(ne(r));if(e instanceof Te)return new Ft(ne(r));if(e instanceof he)return new Mt(oe(r));if(e instanceof fe)return new Rt(oe(r));if(e instanceof Se)return new Gt(oe(r));if(e instanceof ee){let t;if(typeof r=="string"||r instanceof g)t=w.fromHex(r);else if(r instanceof w)t=r;else throw new Error("Invalid account address.");return new Kt(t)}if(e instanceof Ee&&e.value instanceof Q){if(!(r instanceof Uint8Array))throw new Error(`${r} should be an instance of Uint8Array`);return new jt(r)}throw new Error("Unknown type for TransactionArgument.")}var ko="APTOS::RawTransaction",lr="APTOS::RawTransactionWithData",Ue=class{constructor(r,e){this.rawTxnBuilder=e,this.signingFunction=r}build(r,e,t){if(!this.rawTxnBuilder)throw new Error("this.rawTxnBuilder doesn't exist.");return this.rawTxnBuilder.build(r,e,t)}static getSigningMessage(r){const e=le.create();if(r instanceof pe)e.update(ko);else if(r instanceof Ot)e.update(lr);else if(r instanceof Lt)e.update(lr);else throw new Error("Unknown transaction type.");const t=e.digest(),s=R(r),i=new Uint8Array(t.length+s.length);return i.set(t),i.set(s,t.length),i}},ut=class extends Ue{constructor(r,e,t){super(r,t),this.publicKey=e}rawToSigned(r){const e=Ue.getSigningMessage(r),t=this.signingFunction(e),s=new Bt(new N(this.publicKey),t);return new Ye(r,s)}sign(r){return R(this.rawToSigned(r))}},Io=class extends Ue{constructor(r,e){super(r),this.publicKey=e}rawToSigned(r){const e=Ue.getSigningMessage(r),t=this.signingFunction(e),s=new kt(this.publicKey,t);return new Ye(r,s)}sign(r){return R(this.rawToSigned(r))}},$o=class bt{constructor(e,t){this.abiMap=new Map,e.forEach(s=>{const i=new St(s),n=rt.deserialize(i);let o;if(n instanceof xe){const a=n,{address:c,name:l}=a.module_name;o=`${g.fromUint8Array(c.address).toShortString()}::${l.value}::${a.name}`}else o=n.name;if(this.abiMap.has(o))throw new Error("Found conflicting ABI interfaces");this.abiMap.set(o,n)}),this.builderConfig={maxGasAmount:BigInt(Cr),expSecFromNow:Or,...t}}static toBCSArgs(e,t){if(e.length!==t.length)throw new Error("Wrong number of args provided.");return t.map((s,i)=>{const n=new U;return zo(s,e[i].type_tag,n),n.getBytes()})}static toTransactionArguments(e,t){if(e.length!==t.length)throw new Error("Wrong number of args provided.");return t.map((s,i)=>Bo(s,e[i].type_tag))}setSequenceNumber(e){this.builderConfig.sequenceNumber=BigInt(e)}buildTransactionPayload(e,t,s){const i=t.map(a=>new Be(a).parseTypeTag());let n;if(!this.abiMap.has(e))throw new Error(`Cannot find function: ${e}`);const o=this.abiMap.get(e);if(o instanceof xe){const a=o,c=bt.toBCSArgs(a.args,s);n=new Ht(new Qe(a.module_name,new I(a.name),i,c))}else if(o instanceof Wt){const a=o,c=bt.toTransactionArguments(a.args,s);n=new Nt(new $t(a.code,i,c))}else throw new Error("Unknown ABI format.");return n}build(e,t,s){const{sender:i,sequenceNumber:n,gasUnitPrice:o,maxGasAmount:a,expSecFromNow:c,chainId:l}=this.builderConfig;if(!o)throw new Error("No gasUnitPrice provided.");const d=i instanceof w?i:w.fromHex(i),u=BigInt(Math.floor(Date.now()/1e3)+Number(c)),h=this.buildTransactionPayload(e,t,s);if(h)return new pe(d,BigInt(n),h,BigInt(a),BigInt(o),u,new Pt(Number(l)));throw new Error("Invalid ABI.")}},it=class{constructor(r,e){this.aptosClient=r,this.builderConfig=e}async fetchABI(r){const e=(await this.aptosClient.getAccountModules(r)).map(s=>s.abi).flatMap(s=>s.exposed_functions.filter(i=>i.is_entry).map(i=>({fullName:`${s.address}::${s.name}::${i.name}`,...i}))),t=new Map;return e.forEach(s=>{t.set(s.fullName,s)}),t}async build(r,e,t){if(r=(f=>f.replace(/^0[xX]0*/g,"0x"))(r),r.split("::").length!==3)throw new Error("'func' needs to be a fully qualified function name in format <address>::<module>::<function>, e.g. 0x1::coin::transfer");const[s,i]=r.split("::"),n=await this.fetchABI(s);if(!n.has(r))throw new Error(`${r} doesn't exist.`);const o=n.get(r),a=o.params.filter(f=>f!=="signer"&&f!=="&signer").map((f,b)=>new tt(`var${b}`,new Be(f,e).parseTypeTag())),c=new xe(o.name,Ae.fromStr(`${s}::${i}`),"",o.generic_type_params.map((f,b)=>new et(`${b}`)),a),{sender:l,...d}=this.builderConfig,u=l instanceof w?g.fromUint8Array(l.address):l,[{sequence_number:h},p,{gas_estimate:y}]=await Promise.all([d!=null&&d.sequenceNumber?Promise.resolve({sequence_number:d==null?void 0:d.sequenceNumber}):this.aptosClient.getAccount(u),d!=null&&d.chainId?Promise.resolve(d==null?void 0:d.chainId):this.aptosClient.getChainId(),d!=null&&d.gasUnitPrice?Promise.resolve({gas_estimate:d==null?void 0:d.gasUnitPrice}):this.aptosClient.estimateGasPrice()]);return new $o([R(c)],{sender:l,sequenceNumber:h,chainId:p,gasUnitPrice:BigInt(y),...d}).build(r,e,t)}};m([Lr(10*60*1e3)],it.prototype,"fetchABI");var z=class ie{constructor(e,t,s=!1){if(!e)throw new Error("Node URL cannot be empty.");s?this.nodeUrl=e:this.nodeUrl=Tn(e),this.config=t==null?{}:{...t}}async getAccount(e){const{data:t}=await O({url:this.nodeUrl,endpoint:`accounts/${g.ensure(e).hex()}`,originMethod:"getAccount",overrides:{...this.config}});return t}async getAccountTransactions(e,t){const{data:s}=await O({url:this.nodeUrl,endpoint:`accounts/${g.ensure(e).hex()}/transactions`,originMethod:"getAccountTransactions",params:{start:t==null?void 0:t.start,limit:t==null?void 0:t.limit},overrides:{...this.config}});return s}async getAccountModules(e,t){return await nr({url:this.nodeUrl,endpoint:`accounts/${e}/modules`,params:{ledger_version:t==null?void 0:t.ledgerVersion,limit:1e3},originMethod:"getAccountModules",overrides:{...this.config}})}async getAccountModule(e,t,s){const{data:i}=await O({url:this.nodeUrl,endpoint:`accounts/${g.ensure(e).hex()}/module/${t}`,originMethod:"getAccountModule",params:{ledger_version:s==null?void 0:s.ledgerVersion},overrides:{...this.config}});return i}async getAccountResources(e,t){return await nr({url:this.nodeUrl,endpoint:`accounts/${e}/resources`,params:{ledger_version:t==null?void 0:t.ledgerVersion,limit:9999},originMethod:"getAccountResources",overrides:{...this.config}})}async getAccountResource(e,t,s){const{data:i}=await O({url:this.nodeUrl,endpoint:`accounts/${g.ensure(e).hex()}/resource/${t}`,originMethod:"getAccountResource",params:{ledger_version:s==null?void 0:s.ledgerVersion},overrides:{...this.config}});return i}static generateBCSTransaction(e,t){return new ut(s=>{const i=e.signBuffer(s);return new x.Ed25519Signature(i.toUint8Array())},e.pubKey().toUint8Array()).sign(t)}static generateBCSSimulation(e,t){return new ut(s=>{const i=new Uint8Array(64);return new x.Ed25519Signature(i)},e.pubKey().toUint8Array()).sign(t)}async generateTransaction(e,t,s){const i={sender:e};if(s!=null&&s.sequence_number&&(i.sequenceNumber=s.sequence_number),s!=null&&s.gas_unit_price&&(i.gasUnitPrice=s.gas_unit_price),s!=null&&s.max_gas_amount&&(i.maxGasAmount=s.max_gas_amount),s!=null&&s.expiration_timestamp_secs){const n=Number.parseInt(s.expiration_timestamp_secs,10);i.expSecFromNow=n-Math.floor(Date.now()/1e3)}return new it(this,i).build(t.function,t.type_arguments,t.arguments)}async generateFeePayerTransaction(e,t,s,i=[],n){const o=await this.generateTransaction(e,t,n),a=i.map(c=>w.fromHex(c));return new x.FeePayerRawTransaction(o,a,w.fromHex(s))}async submitFeePayerTransaction(e,t,s,i=[]){const n=new x.TransactionAuthenticatorFeePayer(t,e.secondary_signer_addresses,i,{address:e.fee_payer_address,authenticator:s}),o=R(new x.SignedTransaction(e.raw_txn,n));return await this.submitSignedBCSTransaction(o)}async signMultiTransaction(e,t){const s=new x.Ed25519Signature(e.signBuffer(Ue.getSigningMessage(t)).toUint8Array()),i=new x.AccountAuthenticatorEd25519(new x.Ed25519PublicKey(e.signingKey.publicKey),s);return Promise.resolve(i)}async signTransaction(e,t){return Promise.resolve(ie.generateBCSTransaction(e,t))}async getEventsByCreationNumber(e,t,s){const{data:i}=await O({url:this.nodeUrl,endpoint:`accounts/${g.ensure(e).hex()}/events/${t}`,originMethod:"getEventsByCreationNumber",params:{start:s==null?void 0:s.start,limit:s==null?void 0:s.limit},overrides:{...this.config}});return i}async getEventsByEventHandle(e,t,s,i){const{data:n}=await O({url:this.nodeUrl,endpoint:`accounts/${g.ensure(e).hex()}/events/${t}/${s}`,originMethod:"getEventsByEventHandle",params:{start:i==null?void 0:i.start,limit:i==null?void 0:i.limit},overrides:{...this.config}});return n}async submitTransaction(e){return this.submitSignedBCSTransaction(e)}async simulateTransaction(e,t,s){let i;return e instanceof je?i=ie.generateBCSSimulation(e,t):e instanceof Ze?i=new Io(()=>{const{threshold:n}=e,o=[],a=[];for(let l=0;l<n;l+=1)o.push(l),a.push(new x.Ed25519Signature(new Uint8Array(64)));const c=x.MultiEd25519Signature.createBitmap(o);return new x.MultiEd25519Signature(a,c)},e).sign(t):i=new ut(()=>{const n=new Uint8Array(64);return new x.Ed25519Signature(n)},e.toBytes()).sign(t),this.submitBCSSimulation(i,s)}async submitSignedBCSTransaction(e){const{data:t}=await we({url:this.nodeUrl,body:e,endpoint:"transactions",originMethod:"submitSignedBCSTransaction",contentType:"application/x.aptos.signed_transaction+bcs",overrides:{...this.config}});return t}async submitBCSSimulation(e,t){var s,i,n;const o={estimate_gas_unit_price:(s=t==null?void 0:t.estimateGasUnitPrice)!=null?s:!1,estimate_max_gas_amount:(i=t==null?void 0:t.estimateMaxGasAmount)!=null?i:!1,estimate_prioritized_gas_unit_price:(n=t==null?void 0:t.estimatePrioritizedGasUnitPrice)!=null?n:!1},{data:a}=await we({url:this.nodeUrl,body:e,endpoint:"transactions/simulate",params:o,originMethod:"submitBCSSimulation",contentType:"application/x.aptos.signed_transaction+bcs",overrides:{...this.config}});return a}async getTransactions(e){var t;const{data:s}=await O({url:this.nodeUrl,endpoint:"transactions",originMethod:"getTransactions",params:{start:(t=e==null?void 0:e.start)==null?void 0:t.toString(),limit:e==null?void 0:e.limit},overrides:{...this.config}});return s}async getTransactionByHash(e){const{data:t}=await O({url:this.nodeUrl,endpoint:`transactions/by_hash/${e}`,originMethod:"getTransactionByHash",overrides:{...this.config}});return t}async getTransactionByVersion(e){const{data:t}=await O({url:this.nodeUrl,endpoint:`transactions/by_version/${e}`,originMethod:"getTransactionByVersion",overrides:{...this.config}});return t}async transactionPending(e){try{return(await this.getTransactionByHash(e)).type==="pending_transaction"}catch(t){if((t==null?void 0:t.status)===404)return!0;throw t}}async waitForTransactionWithResult(e,t){var s,i;const n=(s=t==null?void 0:t.timeoutSecs)!=null?s:Sn,o=(i=t==null?void 0:t.checkSuccess)!=null?i:!1;let a=!0,c=0,l;for(;a&&!(c>=n);){try{if(l=await this.getTransactionByHash(e),a=l.type==="pending_transaction",!a)break}catch(d){const u=d instanceof Jt,h=u&&d.status!==404&&d.status>=400&&d.status<500;if(!u||h)throw d}await zn(1e3),c+=1}if(l===void 0)throw new Error(`Waiting for transaction ${e} failed`);if(a)throw new Co(`Waiting for transaction ${e} timed out after ${n} seconds`,l);if(!o)return l;if(!(l!=null&&l.success))throw new Oo(`Transaction ${e} failed with an error: ${l.vm_status}`,l);return l}async waitForTransaction(e,t){await this.waitForTransactionWithResult(e,t)}async getLedgerInfo(){const{data:e}=await O({url:this.nodeUrl,originMethod:"getLedgerInfo",overrides:{...this.config}});return e}async getChainId(){return(await this.getLedgerInfo()).chain_id}async getTableItem(e,t,s){var i;return(await we({url:this.nodeUrl,body:t,endpoint:`tables/${e}/item`,originMethod:"getTableItem",params:{ledger_version:(i=s==null?void 0:s.ledgerVersion)==null?void 0:i.toString()},overrides:{...this.config}})).data}async generateRawTransaction(e,t,s){const[{sequence_number:i},n,{gas_estimate:o}]=await Promise.all([s!=null&&s.providedSequenceNumber?Promise.resolve({sequence_number:s.providedSequenceNumber}):this.getAccount(e),this.getChainId(),s!=null&&s.gasUnitPrice?Promise.resolve({gas_estimate:s.gasUnitPrice}):this.estimateGasPrice()]),{maxGasAmount:a,gasUnitPrice:c,expireTimestamp:l}={maxGasAmount:BigInt(Cr),gasUnitPrice:BigInt(o),expireTimestamp:BigInt(Math.floor(Date.now()/1e3)+Or),...s};return new x.RawTransaction(x.AccountAddress.fromHex(e),BigInt(i),t,a,c,l,new x.ChainId(n))}async generateSignSubmitTransaction(e,t,s){const i=await this.generateRawTransaction(e.address(),t,s),n=ie.generateBCSTransaction(e,i);return(await this.submitSignedBCSTransaction(n)).hash}async signAndSubmitTransaction(e,t){const s=ie.generateBCSTransaction(e,t);return(await this.submitSignedBCSTransaction(s)).hash}async publishPackage(e,t,s,i){const n=new U;B(s,n);const o=new x.TransactionPayloadEntryFunction(x.EntryFunction.natural("0x1::code","publish_package_txn",[],[X(t),n.getBytes()]));return this.generateSignSubmitTransaction(e,o,i)}async createResourceAccountAndPublishPackage(e,t,s,i,n){const o=new U;B(i,o);const a=new x.TransactionPayloadEntryFunction(x.EntryFunction.natural("0x1::resource_account","create_resource_account_and_publish_package",[],[X(t),X(s),o.getBytes()]));return this.generateSignSubmitTransaction(e,a,n)}async generateSignSubmitWaitForTransaction(e,t,s){const i=await this.generateSignSubmitTransaction(e,t,s);return this.waitForTransactionWithResult(i,s)}async estimateGasPrice(){const{data:e}=await O({url:this.nodeUrl,endpoint:"estimate_gas_price",originMethod:"estimateGasPrice",overrides:{...this.config}});return e}async estimateMaxGasAmount(e){const t=`0x1::coin::CoinStore<${ft}>`,[{gas_estimate:s},i]=await Promise.all([this.estimateGasPrice(),this.getAccountResources(e)]),n=i.find(o=>o.type===t);return BigInt(n.data.coin.value)/BigInt(s)}async rotateAuthKeyEd25519(e,t,s){const{sequence_number:i,authentication_key:n}=await this.getAccount(e.address()),o=new je(t),a=new x.RotationProofChallenge(x.AccountAddress.CORE_CODE_ADDRESS,"account","RotationProofChallenge",BigInt(i),x.AccountAddress.fromHex(e.address()),new x.AccountAddress(new g(n).toUint8Array()),o.pubKey().toUint8Array()),c=g.fromUint8Array(R(a)),l=e.signHexString(c),d=o.signHexString(c),u=new x.TransactionPayloadEntryFunction(x.EntryFunction.natural("0x1::account","rotate_authentication_key",[],[pt(0),X(e.pubKey().toUint8Array()),pt(0),X(o.pubKey().toUint8Array()),X(l.toUint8Array()),X(d.toUint8Array())])),h=await this.generateRawTransaction(e.address(),u,s),p=ie.generateBCSTransaction(e,h);return this.submitSignedBCSTransaction(p)}async lookupOriginalAddress(e){const t=await this.getAccountResource("0x1","0x1::account::OriginatingAddress"),{address_map:{handle:s}}=t.data,i=await this.getTableItem(s,{key_type:"address",value_type:"address",key:g.ensure(e).hex()});return new g(i)}async getBlockByHeight(e,t){const{data:s}=await O({url:this.nodeUrl,endpoint:`blocks/by_height/${e}`,originMethod:"getBlockByHeight",params:{with_transactions:t},overrides:{...this.config}});return s}async getBlockByVersion(e,t){const{data:s}=await O({url:this.nodeUrl,endpoint:`blocks/by_version/${e}`,originMethod:"getBlockByVersion",params:{with_transactions:t},overrides:{...this.config}});return s}async view(e,t){const{data:s}=await we({url:this.nodeUrl,body:e,endpoint:"view",originMethod:"getTableItem",params:{ledger_version:t},overrides:{...this.config}});return s}clearCache(e){En(e)}};m([S],z.prototype,"getAccount");m([S],z.prototype,"getAccountTransactions");m([S,Lr(10*60*1e3)],z.prototype,"getAccountModules");m([S],z.prototype,"getAccountModule");m([S],z.prototype,"getAccountResources");m([S],z.prototype,"getAccountResource");m([S],z.prototype,"getEventsByCreationNumber");m([S],z.prototype,"getEventsByEventHandle");m([S],z.prototype,"submitSignedBCSTransaction");m([S],z.prototype,"submitBCSSimulation");m([S],z.prototype,"getTransactions");m([S],z.prototype,"getTransactionByHash");m([S],z.prototype,"getTransactionByVersion");m([S],z.prototype,"getLedgerInfo");m([Je()],z.prototype,"getChainId");m([S],z.prototype,"getTableItem");m([S,Je({ttlMs:5*60*1e3,tags:["gas_estimates"]})],z.prototype,"estimateGasPrice");m([S],z.prototype,"estimateMaxGasAmount");m([S],z.prototype,"getBlockByHeight");m([S],z.prototype,"getBlockByVersion");m([S],z.prototype,"view");var nt=z,Co=class extends Error{constructor(r,e){super(r),this.lastSubmittedTransaction=e}},Oo=class extends Error{constructor(r,e){super(r),this.transaction=e}},Jt=class extends Error{constructor(r,e,t,s){super(e),this.status=r,this.message=e,this.errorCode=t,this.vmErrorCode=s}};function S(r,e,t){const s=t.value;return t.value=async function(...i){var n,o;try{return await s.apply(this,[...i])}catch(a){throw a instanceof Nr?new Jt(a.status,JSON.stringify({message:a.message,...a.data}),(n=a.data)==null?void 0:n.error_code,(o=a.data)==null?void 0:o.vm_error_code):a}},t}var Js=class T{constructor(e,t){this.endpoint=e,this.config=t}static validateAddress(e){if(e.length<66)throw new Error(`${e} is less than 66 chars long.`)}async queryIndexer(e){const t=await we({url:this.endpoint,body:e,overrides:{WITH_CREDENTIALS:!1,...this.config}});if(t.data.errors)throw new Jt(t.data.errors[0].extensions.code,JSON.stringify({message:t.data.errors[0].message,error_code:t.data.errors[0].extensions.code}));return t.data.data}async getIndexerLedgerInfo(){const e={query:fo};return this.queryIndexer(e)}async getAccountNFTs(e,t){const s=g.ensure(e).hex();T.validateAddress(s);const i={query:io,variables:{address:s,offset:t==null?void 0:t.offset,limit:t==null?void 0:t.limit}};return this.queryIndexer(i)}async getTokenActivities(e,t){var s,i;const n=g.ensure(e).hex();T.validateAddress(n);const o={token_data_id:{_eq:n}};t!=null&&t.tokenStandard&&(o.token_standard={_eq:t==null?void 0:t.tokenStandard});const a={query:yo,variables:{where_condition:o,offset:(s=t==null?void 0:t.options)==null?void 0:s.offset,limit:(i=t==null?void 0:t.options)==null?void 0:i.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(a)}async getTokenActivitiesCount(e){const t={query:wo,variables:{token_id:e}};return this.queryIndexer(t)}async getAccountTokensCount(e,t){var s,i;const n={owner_address:{_eq:e},amount:{_gt:"0"}};t!=null&&t.tokenStandard&&(n.token_standard={_eq:t==null?void 0:t.tokenStandard});const o=g.ensure(e).hex();T.validateAddress(o);const a={query:no,variables:{where_condition:n,offset:(s=t==null?void 0:t.options)==null?void 0:s.offset,limit:(i=t==null?void 0:t.options)==null?void 0:i.limit}};return this.queryIndexer(a)}async getTokenData(e,t){var s,i;const n=g.ensure(e).hex();T.validateAddress(n);const o={token_data_id:{_eq:n}};t!=null&&t.tokenStandard&&(o.token_standard={_eq:t==null?void 0:t.tokenStandard});const a={query:bo,variables:{where_condition:o,offset:(s=t==null?void 0:t.options)==null?void 0:s.offset,limit:(i=t==null?void 0:t.options)==null?void 0:i.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(a)}async getTokenOwnersData(e,t,s){var i,n;const o=g.ensure(e).hex();T.validateAddress(o);const a={token_data_id:{_eq:o},amount:{_gt:"0"}};t&&(a.property_version_v1={_eq:t}),s!=null&&s.tokenStandard&&(a.token_standard={_eq:s==null?void 0:s.tokenStandard});const c={query:Ao,variables:{where_condition:a,offset:(i=s==null?void 0:s.options)==null?void 0:i.offset,limit:(n=s==null?void 0:s.options)==null?void 0:n.limit,order_by:s==null?void 0:s.orderBy}};return this.queryIndexer(c)}async getTokenCurrentOwnerData(e,t,s){var i,n;const o=g.ensure(e).hex();T.validateAddress(o);const a={token_data_id:{_eq:o},amount:{_gt:"0"}};t&&(a.property_version_v1={_eq:t}),s!=null&&s.tokenStandard&&(a.token_standard={_eq:s==null?void 0:s.tokenStandard});const c={query:mo,variables:{where_condition:a,offset:(i=s==null?void 0:s.options)==null?void 0:i.offset,limit:(n=s==null?void 0:s.options)==null?void 0:n.limit,order_by:s==null?void 0:s.orderBy}};return this.queryIndexer(c)}async getOwnedTokens(e,t){var s,i;const n=g.ensure(e).hex();T.validateAddress(n);const o={owner_address:{_eq:n},amount:{_gt:0}};t!=null&&t.tokenStandard&&(o.token_standard={_eq:t==null?void 0:t.tokenStandard});const a={query:po,variables:{where_condition:o,offset:(s=t==null?void 0:t.options)==null?void 0:s.offset,limit:(i=t==null?void 0:t.options)==null?void 0:i.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(a)}async getOwnedTokensByTokenData(e,t){var s,i;const n=g.ensure(e).hex();T.validateAddress(n);const o={token_data_id:{_eq:n},amount:{_gt:0}};t!=null&&t.tokenStandard&&(o.token_standard={_eq:t==null?void 0:t.tokenStandard});const a={query:_o,variables:{where_condition:o,offset:(s=t==null?void 0:t.options)==null?void 0:s.offset,limit:(i=t==null?void 0:t.options)==null?void 0:i.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(a)}async getTokenOwnedFromCollectionAddress(e,t,s){var i,n;const o=g.ensure(e).hex();T.validateAddress(o);const a=g.ensure(t).hex();T.validateAddress(a);const c={owner_address:{_eq:o},current_token_data:{collection_id:{_eq:a}},amount:{_gt:0}};s!=null&&s.tokenStandard&&(c.token_standard={_eq:s==null?void 0:s.tokenStandard});const l={query:vo,variables:{where_condition:c,offset:(i=s==null?void 0:s.options)==null?void 0:i.offset,limit:(n=s==null?void 0:s.options)==null?void 0:n.limit,order_by:s==null?void 0:s.orderBy}};return this.queryIndexer(l)}async getTokenOwnedFromCollectionNameAndCreatorAddress(e,t,s,i){const n=await this.getCollectionAddress(s,t,i);return await this.getTokenOwnedFromCollectionAddress(e,n,i)}async getCollectionData(e,t,s){var i,n;const o=g.ensure(e).hex();T.validateAddress(o);const a={collection_name:{_eq:t},creator_address:{_eq:o}};s!=null&&s.tokenStandard&&(a.token_standard={_eq:s==null?void 0:s.tokenStandard});const c={query:co,variables:{where_condition:a,offset:(i=s==null?void 0:s.options)==null?void 0:i.offset,limit:(n=s==null?void 0:s.options)==null?void 0:n.limit,order_by:s==null?void 0:s.orderBy}};return this.queryIndexer(c)}async getCollectionAddress(e,t,s){return(await this.getCollectionData(e,t,s)).current_collections_v2[0].collection_id}async getCollectionsWithOwnedTokens(e,t){var s,i;const n=g.ensure(e).hex();T.validateAddress(n);const o={owner_address:{_eq:n}};t!=null&&t.tokenStandard&&(o.current_collection={token_standard:{_eq:t==null?void 0:t.tokenStandard}});const a={query:lo,variables:{where_condition:o,offset:(s=t==null?void 0:t.options)==null?void 0:s.offset,limit:(i=t==null?void 0:t.options)==null?void 0:i.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(a)}async getAccountTransactionsCount(e){const t=g.ensure(e).hex();T.validateAddress(t);const s={query:oo,variables:{address:t}};return this.queryIndexer(s)}async getAccountTransactionsData(e,t){var s,i;const n=g.ensure(e).hex();T.validateAddress(n);const o={query:ao,variables:{where_condition:{account_address:{_eq:n}},offset:(s=t==null?void 0:t.options)==null?void 0:s.offset,limit:(i=t==null?void 0:t.options)==null?void 0:i.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(o)}async getTopUserTransactions(e){const t={query:xo,variables:{limit:e}};return this.queryIndexer(t)}async getUserTransactions(e){var t,s;const i={version:{_lte:e==null?void 0:e.startVersion}},n={query:Uo,variables:{where_condition:i,offset:(t=e==null?void 0:e.options)==null?void 0:t.offset,limit:(s=e==null?void 0:e.options)==null?void 0:s.limit,order_by:e==null?void 0:e.orderBy}};return this.queryIndexer(n)}async getDelegatedStakingActivities(e,t){const s=g.ensure(e).hex(),i=g.ensure(t).hex();T.validateAddress(s),T.validateAddress(i);const n={query:ho,variables:{delegatorAddress:s,poolAddress:i}};return this.queryIndexer(n)}async getNumberOfDelegators(e){const t=g.ensure(e).hex();T.validateAddress(t);const s={query:go,variables:{poolAddress:t}};return this.queryIndexer(s)}async getAccountCoinsData(e,t){var s,i;const n=g.ensure(e).hex();T.validateAddress(n);const o={query:so,variables:{where_condition:{owner_address:{_eq:n}},offset:(s=t==null?void 0:t.options)==null?void 0:s.offset,limit:(i=t==null?void 0:t.options)==null?void 0:i.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(o)}async getAccountCoinsDataCount(e){const t=g.ensure(e).hex();T.validateAddress(t);const s={query:ro,variables:{address:t}};return this.queryIndexer(s)}async getAccountOwnedObjects(e,t){var s,i;const n=g.ensure(e).hex();T.validateAddress(n);const o={query:uo,variables:{where_condition:{owner_address:{_eq:n}},offset:(s=t==null?void 0:t.options)==null?void 0:s.offset,limit:(i=t==null?void 0:t.options)==null?void 0:i.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(o)}},Ve=class{constructor(r,e,t=!1){let s=null,i=null;if(typeof r=="object"&&Lo(r)?(s=r.fullnodeUrl,i=r.indexerUrl,this.network="CUSTOM"):(s=In[r],i=gt[r],this.network=r),this.network==="CUSTOM"&&!s)throw new Error("fullnode url is not provided");i&&(this.indexerClient=new Js(i,e)),this.aptosClient=new nt(s,e,t)}};function Zs(r,e,t){Object.getOwnPropertyNames(e.prototype).forEach(s=>{const i=Object.getOwnPropertyDescriptor(e.prototype,s);i&&(i.value=function(...n){return this[t][s](...n)},Object.defineProperty(r.prototype,s,i))}),Object.getOwnPropertyNames(e).forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);i&&(i.value=function(...n){return this[t][s](...n)},!r.hasOwnProperty.call(r,s)&&Object.defineProperty(r,s,i))})}Zs(Ve,nt,"aptosClient");Zs(Ve,Js,"indexerClient");function Lo(r){return r.fullnodeUrl!==void 0&&typeof r.fullnodeUrl=="string"}var Qs=class{constructor(r,e){this.type=r,this.value=e}},Ys=class{constructor(){this.data={}}setProperty(r,e){this.data[r]=e}};function No(r){let e;return r==="string"||r==="String"?e=new te(It):e=new Be(r).parseTypeTag(),e}function ei(r){const e=r.map.data,t=new Ys;return e.forEach(s=>{const{key:i}=s,n=s.value.value,o=s.value.type,a=No(o),c=Ho(a,n),l=new Qs(o,c);t.setProperty(i,l)}),t}function Ho(r,e){const t=new St(new g(e).toUint8Array());let s="";return r instanceof Q?s=t.deserializeU8().toString():r instanceof he?s=t.deserializeU64().toString():r instanceof fe?s=t.deserializeU128().toString():r instanceof ue?s=t.deserializeBool()?"true":"false":r instanceof ee?s=g.fromUint8Array(t.deserializeFixedBytes(32)).hex():r instanceof te&&r.isStringTypeTag()?s=t.deserializeStr():s=e,s}var Po={};Xe(Po,{PropertyMap:()=>Ys,PropertyValue:()=>Qs,Token:()=>Do,TokenData:()=>qo});var qo=class{constructor(r,e,t,s,i,n,o,a){this.collection=r,this.description=e,this.name=t,this.maximum=s,this.supply=i,this.uri=n,this.default_properties=ei(o),this.mutability_config=a}},Do=class{constructor(r,e,t){this.id=r,this.amount=e,this.token_properties=ei(t)}},dr=class{constructor(r){this.assetType="0x1::fungible_asset::Metadata",this.provider=r}async transfer(r,e,t,s,i){const n=await this.generateTransfer(r,e,t,s,i);return await this.provider.signAndSubmitTransaction(r,n)}async getPrimaryBalance(r,e){const t={function:"0x1::primary_fungible_store::balance",type_arguments:[this.assetType],arguments:[g.ensure(r).hex(),g.ensure(e).hex()]},s=await this.provider.view(t);return BigInt(s[0])}async generateTransfer(r,e,t,s,i){return await new it(this.provider,{sender:r.address(),...i}).build("0x1::primary_fungible_store::transfer",[this.assetType],[g.ensure(e).hex(),g.ensure(t).hex(),s])}},ur="0x1::aptos_account::transfer_coins",Fo="0x1::coin::transfer",Mo=class{constructor(r){this.aptosClient=r}async transfer(r,e,t,s){var i,n,o;const a=((i=s==null?void 0:s.coinType)!=null?i:"").toString().includes("::");if(s!=null&&s.coinType&&!a&&w.isValid(s.coinType)){console.warn("to transfer a fungible asset, use `FungibleAssetClient()` class for better support");const p=new Ve({fullnodeUrl:this.aptosClient.nodeUrl,indexerUrl:(n=gt[or[this.aptosClient.nodeUrl]])!=null?n:this.aptosClient.nodeUrl});return await new dr(p).transfer(r,s==null?void 0:s.coinType,He(e),t)}const c=(o=s==null?void 0:s.coinType)!=null?o:ft;let l;(s==null?void 0:s.createReceiverIfMissing)===void 0?l=ur:l=s!=null&&s.createReceiverIfMissing?ur:Fo;const d=He(e),u=await new it(this.aptosClient,{sender:r.address(),...s}).build(l,[c],[d,t]),h=nt.generateBCSTransaction(r,u);return(await this.aptosClient.submitSignedBCSTransaction(h)).hash}async checkBalance(r,e){var t,s,i;const n=((t=e==null?void 0:e.coinType)!=null?t:"").toString().includes("::");if(e!=null&&e.coinType&&!n&&w.isValid(e.coinType)){console.warn("to check balance of a fungible asset, use `FungibleAssetClient()` class for better support");const l=new Ve({fullnodeUrl:this.aptosClient.nodeUrl,indexerUrl:(s=gt[or[this.aptosClient.nodeUrl]])!=null?s:this.aptosClient.nodeUrl});return await new dr(l).getPrimaryBalance(He(r),e==null?void 0:e.coinType)}const o=`0x1::coin::CoinStore<${(i=e==null?void 0:e.coinType)!=null?i:ft}>`,a=He(r),c=await this.aptosClient.getAccountResource(a,o);return BigInt(c.data.coin.value)}},Ro={};Xe(Ro,{AptosErrorCode:()=>ti,MoveFunctionVisibility:()=>ri,RoleType:()=>si});var ti=(r=>(r.ACCOUNT_NOT_FOUND="account_not_found",r.RESOURCE_NOT_FOUND="resource_not_found",r.MODULE_NOT_FOUND="module_not_found",r.STRUCT_FIELD_NOT_FOUND="struct_field_not_found",r.VERSION_NOT_FOUND="version_not_found",r.TRANSACTION_NOT_FOUND="transaction_not_found",r.TABLE_ITEM_NOT_FOUND="table_item_not_found",r.BLOCK_NOT_FOUND="block_not_found",r.STATE_VALUE_NOT_FOUND="state_value_not_found",r.VERSION_PRUNED="version_pruned",r.BLOCK_PRUNED="block_pruned",r.INVALID_INPUT="invalid_input",r.INVALID_TRANSACTION_UPDATE="invalid_transaction_update",r.SEQUENCE_NUMBER_TOO_OLD="sequence_number_too_old",r.VM_ERROR="vm_error",r.HEALTH_CHECK_FAILED="health_check_failed",r.MEMPOOL_IS_FULL="mempool_is_full",r.INTERNAL_ERROR="internal_error",r.WEB_FRAMEWORK_ERROR="web_framework_error",r.BCS_NOT_SUPPORTED="bcs_not_supported",r.API_DISABLED="api_disabled",r))(ti||{}),ri=(r=>(r.PRIVATE="private",r.PUBLIC="public",r.FRIEND="friend",r))(ri||{}),si=(r=>(r.VALIDATOR="validator",r.FULL_NODE="full_node",r))(si||{});class ii extends pi{}const ni=class be extends ai{constructor(e,t){super(e,t??ci(e,be._platform))}getRpc(e){if(e in this.config)return new nt(this.config[e].rpc);throw new Error("No configuration available for chain: "+e)}getChain(e,t){if(e in this.config)return new ii(e,this);throw new Error("No configuration available for chain: "+e)}static nativeTokenId(e,t){if(!this.isSupportedChain(t))throw new Error(`invalid chain: ${t}`);return li.tokenId(t,Yt)}static isNativeTokenId(e,t,s){return!this.isSupportedChain(t)||s.chain!==t?!1:this.nativeTokenId(e,t)==s}static isSupportedChain(e){return di(e)===be._platform}static async getDecimals(e,t,s){if(dt(s))return ui(be._platform);const i=s.toString(),n=`0x1::coin::CoinInfo<${i}>`;return(await t.getAccountResource(i.split(hi)[0],n)).data.decimals}static async getBalance(e,t,s,i){const n=dt(i)?Yt:i.toString(),o=new Mo(t);try{return await o.checkBalance(s,{coinType:n})}catch(a){if(a.errorCode==="resource_not_found"&&a.status===404)return null;throw a}}static async getBalances(e,t,s,i){return(await Promise.all(i.map(async n=>{const o=await this.getBalance(e,t,s,n);return{[dt(n)?"native":new hr(n).toString()]:o}}))).reduce((n,o)=>Object.assign(n,o),{})}static async sendWait(e,t,s){const i=[];for(const n of s){const o=await t.submitTransaction(n),a=await t.waitForTransactionWithResult(o.hash);i.push(a.hash)}return i}static async getLatestBlock(e){const t=await e.getLedgerInfo();return Number(t.block_height)}static async getLatestFinalizedBlock(e){const t=await e.getLedgerInfo();return Number(t.block_height)}static chainFromChainId(e){const t=fi(be._platform,BigInt(e));if(!t)throw new Error(`No matching chainId to determine network and chain: ${e}`);const[s,i]=t;return[s,i]}static async chainFromRpc(e){const t=await e.getChainId();return this.chainFromChainId(t.toString())}};ye(ni,"_platform",fr);let vt=ni;async function Go(r,e){const[t,s]=await vt.chainFromRpc(r);return new Ko(s,new je(_i.decode(e)),r)}class Ko{constructor(e,t,s,i){ye(this,"_chain"),ye(this,"_account"),ye(this,"_rpc"),ye(this,"_debug"),this._chain=e,this._account=t,this._rpc=s,this._debug=i}chain(){return this._chain}address(){return this._account.address().hex()}async signAndSend(e){const t=[];for(const s of e){const{description:i,transaction:n}=s;this._debug&&console.log(`Signing: ${i} for ${this.address()}`);const o={gas_unit_price:"100",max_gas_amount:"30000",expiration_timestamp_secs:(BigInt(Date.now()+8*60*60*1e3)/1000n).toString()},a=await this._rpc.generateTransaction(this._account.address(),n,o),{hash:c}=await this._simSignSend(a);t.push(c)}return t}async _simSignSend(e){return await this._rpc.simulateTransaction(this._account,e).then(t=>t.forEach(s=>{if(!s.success)throw new Error(`Transaction failed: ${s.vm_status}
${JSON.stringify(s,null,2)}`)})),this._rpc.signTransaction(this._account,e).then(t=>this._rpc.submitTransaction(t)).then(t=>this._rpc.waitForTransactionWithResult(t.hash))}}const jo={Address:hr,Platform:vt,getSigner:Go,protocols:{WormholeCore:()=>Qt(()=>import("./index-RH1OzbVe.jtzng3hc.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url),TokenBridge:()=>Qt(()=>import("./index-C61jUsbI.dzolq0mr.js"),__vite__mapDeps([13,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)},getChain:(r,e,t)=>new ii(e,new vt(r,gi(r,fr,{[e]:t})))},ra=Object.freeze(Object.defineProperty({__proto__:null,default:jo},Symbol.toStringTag,{value:"Module"}));export{vt as A,ra as a};
